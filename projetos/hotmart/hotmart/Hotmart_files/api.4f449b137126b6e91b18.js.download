(window.pf4f47fd4774cx=window.pf4f47fd4774cx||[]).push([[2],{140:function(t,e,n){"use strict";n.r(e),n.d(e,"ApiObject",(function(){return h}));var i=n(10),r=n(5),s=n(32),o=n(61),c=n(11),a=n(6),d=n(2),u=(n(90),n(22)),l=n(27);class h{constructor(){this.tours=new b,this.feedback=new m,this.button=new F,this.announcements=new k,this.hints=new f,this.checklists=new g,this.analytics=new w,this.announcementsV2=new y,this.surveys=new C,Object(d.c)()&&(this.events=new p)}}class w{forwardEvent(t){return Object(c.c)("pf_custom_event_fired",e=>{t(e.event,e.data)})}}class p{track(t,e,n){window.productFruits.eventsFactory.trackEvent(t,e,n)}}class g{constructor(){this.last_isChecklistEligible_call={},this.isChecklistEligibleCache={}}markItemAsDone(t,e){const n=window.productFruits.checklistsFactory.getItemsByInternalId(t);if(n&&n.length>0){if(n.forEach(t=>window.productFruits.checklistsFactory.markItemAsDoneByItemIdAndAdvance(t.id,!e)),e){[...new Set(n.map(t=>t.checklistId))].forEach(t=>window.productFruits.checklistsFactory.openChecklistModal(t))}return!0}return!1}injectToElement(t,e,{checkEligibility:n}={}){if(!e||!e.appendChild)throw new Error("You must pass a JS HTML element instance.");const i=window.productFruits.checklistsFactory.getChecklistInstanceById(t);if(!i)throw new Error("Checklist not found. Possible reasons: 1) wrong ID, 2) checklist was dismissed, 3) checklist is not published");if("embd"!=i.config.displayMode)throw new Error("The checklist is not set to Embeddable mode");!0===n?this.isChecklistEligible(t).then(t=>{"eligible"==t&&i.injectToElement(e)}):i.injectToElement(e)}isChecklistEligible(t){const e=window.productFruits.checklistsFactory.getChecklistInstanceById(t);if(!e)throw new Error("Checklist not found. Possible reasons: 1) wrong ID, 2) checklist was dismissed, 3) checklist is not published");if("embd"!=e.config.displayMode)throw new Error("This method can be used only when using Embeddable mode");const n=new Date;return n-this.last_isChecklistEligible_call[t]<700?(console.warn("You are checking checklist eligibility too often. Please check your code. Returning a cached value. ChecklistId: "+t),new Promise(e=>e(this.isChecklistEligibleCache[t]||"not_eligible"))):(this.last_isChecklistEligible_call[t]=n,new Promise(n=>{e.checkVisibilityAsync().then(e=>{this.isChecklistEligibleCache[t]=e,n(e)})}))}listen(t,e){if(e)return"item-launched"==t?u.a.attachChecklistItemLaunched_disposable(t=>{e(t.id,t.internalId)}):"item-completed"==t?u.a.attachChecklistItemCompleted_disposable(t=>{e(t.id,t.internalId)}):"dismissed"==t?u.a.attachChecklistDismissed_disposable((t,n)=>{e(t,n)}):"eligibility-changed"==t?u.a.attachChecklistEligibilityChanged_disposable((t,n)=>{e(t,n)}):void 0}getChecklists(){return window.productFruits.checklistsFactory&&window.productFruits.checklistsFactory.config?window.productFruits.checklistsFactory.checklistConfigs.map(n=>({id:n.id,name:n.name,description:n.description?n.description[window.productFruits.language]:void 0,title:n.title?n.title[window.productFruits.language]:void 0,state:t(n.state),items:n.items&&n.items.map&&n.items.map(t=>({id:t.id,internalId:t.customId,title:t.title,description:t.description?t.description[window.productFruits.language]:void 0,state:e(t.state)}))})):[];function t(t){switch(t){case 0:return"not_touched";case 1:return"finished";case 2:return"in_progress";case 3:return"empty"}}function e(t){switch(t){case"done":return"done";case"wip":return"open";default:return"tbd"}}}resetForCurrentUser(t){if(!Object(d.a)("chk_rst_jsapi"))return;var e=i.a.getCurrentIdentity();const n=Object(o.a)(async()=>{var n,o,c,a;await Object(s.b)(Object(r.d)()+"/api/v1/stats/"+r.a.code+"/checklists/restart",{username:i.a.user.username,groupId:null===(n=i.a.group)||void 0===n?void 0:n.groupId,checklistId:t,hmac:null!==(o=null==e||null===(c=e.user)||void 0===c||null===(a=c.data)||void 0===a?void 0:a.hmac)&&void 0!==o?o:void 0})},500);r.c.checklistsFactory.resetChecklist(t),n(t)}}class b{constructor(){this.last_isTourEligible_call={},this.isTourEligibleCache={}}tryStartTour(t,{noRedirect:e}={}){window.productFruits.toursFactory.startTour(t,{forceForUser:!0,autoStartRedirect:!e})}suspendAllTours(){window.productFruits.toursFactory.stopAllTours()}getTours(){return window.productFruits.toursFactory.getTours().map(e=>{const n=e.currentCardInfo&&e.currentCardInfo.currentCard?e.currentCardInfo.currentCard:null;return{id:e.getId(),name:e.getName(),userState:t(e.userState),isRunning:e.isRunning(),rulesValid:()=>e.allRulesValid(),currentCard:e.isRunning()&&n&&n.getId?{id:n.getId(),name:n.getName()}:null}});function t(t){switch(t){case 0:return"not_finished";case 1:return"finished";case 2:return"skipped";default:return"unknown"}}}isTourEligible(t){const e=window.productFruits.toursFactory.getTours().find(e=>e.getId()==t),n=new Date;return n-this.last_isTourEligible_call[t]<700?(console.warn("You are checking tour eligibility too often. Please check your code. Returning a cached value. TourId: "+t),new Promise(e=>e(this.isTourEligibleCache[t]||"not_eligible"))):(this.last_isTourEligible_call[t]=n,new Promise(t=>{Object(d.c)()?e.allRulesValidAsync().then(e=>{t(i(e))}):t(i(e.allRulesValid()))}));function i(t){return t?"eligible":"not_eligible"}}markAs(t,e,n=!0){function i(){switch(e){case"finished":return 1;case"skipped":return 2;default:throw new Error("Only finished and skipped states are supported.")}}const r=window.productFruits.toursFactory.getTour(t);if(!r)throw new Error("Tour not found");r.userState=i(),Object(l.c)(t,i()),n&&this.kill(t)}advanceToNextStep(t){const e=window.productFruits.toursFactory.getTour(t);if(!e)throw new Error("Tour not found");e.currentClearAdvanceHandlersFn&&e.currentClearAdvanceHandlersFn(),e.sendStatAndShowNextCard()}goToPreviousStep(t){const e=window.productFruits.toursFactory.getTour(t);if(!e)throw new Error("Tour not found");e.currentClearAdvanceHandlersFn&&e.currentClearAdvanceHandlersFn(),e.showNextCard({showPrevious:!0})}kill(t){window.productFruits.toursFactory.killTour(t)}listen(t,e){if(e)return"tour-finished"==t?u.a.attachTourFinished_disposable(t=>{e(t.originalConfig.id)}):"tour-skipped"==t?u.a.attachTourSkipped_disposable(t=>{e(t.originalConfig.id)}):"tour-advanced"==t?u.a.attachTourAdvanced_disposable(t=>{e(t.originalConfig.id,{currentCardId:t.currentCardInfo.currentCard.getId()})}):"tour-card-completed"==t?u.a.attachTourBeforeAdvanced_disposable(t=>{e(t.originalConfig.id,{currentCardId:t.currentCardInfo.currentCard.getId()})}):void 0}}class f{updatePositions(){window.productFruits.contextHelp.updateAllPositions()}toggleVisibility(t){const e=window.productFruits.contextHelp.getDomContainer();null==t?e.style.display?e.style.display=null:e.style.display="none":e.style.display=t?null:"none"}}class m{showModal(t,e){window.productFruits.feedback.showFeedbackPopup(t,e)}hideModal(){window.productFruits.feedback.closeFeedbackPopup()}changeRecorderMode(t){window.productFruits.feedback.changeRecMode("native"==t?"capt":null)}}class F{showModal(){window.productFruits.button.openModal()}hideModal(){window.productFruits.button.hideModal()}hideButton(){window.productFruits.button.detachButton()}showButton(){window.productFruits.button.attachButton()}show(){window.productFruits.button.attachButton(),setTimeout(()=>{window.productFruits.button.openModal()},200)}hide(){window.productFruits.button.detachButton()}close(){window.productFruits.button.hideModal()}open(){window.productFruits.button.openModal()}isOpened(){return window.productFruits.button.isModalShown}openIn(t,e){if("group"==t)window.productFruits.button.openModalWithGroup(e);else{if("article"!=t)throw new Error("Only group or article types are supported");window.productFruits.button.openModalWithArticle(e)}}listen(t,e){switch(t){case"closed":return Object(c.c)("pf-life-ring-hidden",()=>e());case"opened":return Object(c.c)("pf-life-ring-opened",()=>e())}}}class k{showLatestAnnouncementModal(t){window.productFruits.changelogs.showLast()}showHistoryModal(){window.productFruits.changelogs.showHistory()}showHistory(t){window.productFruits.announcements.showHistory(t)}getCurrentBannersSpace(t){return window.productFruits.announcements.getCurrentBannerSpacing(t)}getAnnouncementsByChannel(t){return Object(a.d)().announcements.changelogs.filter(e=>e.channelId==t).map(t=>({id:t.id,titles:t.title,publishedAt:t.publishedAt,userState:e(t.userState)})).sort((t,e)=>t.publishedAt>e.publishedAt?-1:e.publishedAt<t.publishedAt?1:0);function e(t){switch(t){case 0:return"seen";case 1:return"not_seen"}}}showAnnouncement(t){window.productFruits.announcements.showAnnouncement(t)||console.error("The given announcement was not found.")}listen(t,e){e&&"banner-spacing"==t&&u.a.attachAnnouncementsBannerSpacing(t=>{e({marginTop:t.detail.marginTop,target:"top"})})}}class y{attachNewsWidgetToElement(t){if(!t||!t.appendChild)throw new Error("You must pass a valid HTMLElement instance as the first parameter");r.c.announcementsV2.appendWidget(t)}listen(t,e){return"newsfeed-unread-count-changed"==t?Object(c.c)("newsfeed-unread-changed",e):"banner-spacing"==t?Object(c.c)("pf_banner_spacing",e):void 0}}class C{startSurvey(t){if(!t||"string"!=typeof t)throw new Error("You must pass the string survey ID as the first argument.");r.c.surveys.startSurvey(t)}listen(t,e){if("survey-closed"==t)return Object(c.c)("survey-closed",e)}}}}]);