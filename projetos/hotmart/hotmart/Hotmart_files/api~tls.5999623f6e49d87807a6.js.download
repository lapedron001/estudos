(window.pf4f47fd4774cx=window.pf4f47fd4774cx||[]).push([[0],[,function(t,e,n){"use strict";function r(t,e,...n){return i(document.createElement(t),e,...n)}function i(t,e,...n){let r=null;r="string"==typeof t?document.querySelector(t):t;const i=["onclick","onchange","onkeydown","onkeyup","onfocus","onblur","oninput","onmousedown","onmousemove","onmouseup"];if("object"==typeof e)for(let t in e){if(-1!==i.indexOf(t.toLowerCase())){const n=t;t.startsWith("on")&&(t=t.substr(2)),r.addEventListener(t.toLowerCase(),e[n]);continue}if("$ref"===t){e[t](r);continue}const n=o(r,t);n.key?"style"===n.key?Object.assign(r[n.key],e[t]):r[n.key]=e[t]||null:r.setAttribute(t,e[t])}function o(t,e){let n=null,r=null;for(let i in t)i.toLowerCase()===e.toLowerCase()&&(n=i,r=t[i]);return{key:n,val:r}}return n&&function t(...e){for(let n of e)if(n)if("string"==typeof n){let t=document.createTextNode(n);r.appendChild(t)}else Array.isArray(n)?t(...n):r.appendChild(n)}(n),r}function o(t,e){return e.querySelector(t)}function s(t){return"string"==typeof t?"productfruits--"+t:t.push?t.filter(t=>!!t).map(t=>"productfruits--"+t).join(" "):void 0}function a(t,e="close",n=500){return t.classList.add("productfruits--animation-"+e),new Promise(r=>{setTimeout(()=>{t.remove(),t.classList.remove("productfruits--animation-"+e),r()},n)})}function d(t,e,{anim:n="fadein",animEndCallback:r=null,onBeforeAnimApplied:i=null,removeAnimationClassAfterDuration:o=0}={}){e.style.visibility="hidden",t.appendChild(e),e.classList.add("productfruits--animation-"+n),e.style.visibility=null,o&&setTimeout(()=>{!function(t,e){t.classList.remove("productfruits--animation-"+e)}(e,n)},o)}function c(t,e="fadein"){t.style.visibility="hidden",t.style.display=null,t.classList.add("productfruits--animation-"+e),t.style.visibility=null}function l(t,e=500){return t.classList.add("productfruits--animation-close"),new Promise(n=>{setTimeout(()=>{t.style.display="none",t.classList.remove("productfruits--animation-close"),n()},e)})}function u(t,e){if(!t)return;const n=[];return t.classList.forEach(r=>{r.startsWith(e)&&(t.classList.remove(r),n.push(r))}),n}function h(t,e){if(e||(e="50px"),"jump"!==e)if("center"!==e){const n=t.style.scrollMargin;t.style.scrollMargin=e,t.scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"}),t.style.scrollMargin=n}else t.scrollIntoView({behavior:"smooth",block:"center",inline:"center"});else t.scrollIntoView()}function p(t,e=null){return"none"!=t.style.display?(t.style.display="none",!1):(t.style.display=e,!0)}function f(t,e){e&&t.appendChild(e)}function g(t,e){e&&t&&t.contains(e)&&t.removeChild(e)}function m(t){let e,n,r=t.contentWindow,i=[];for(;r!==window.top;){e=r.parent;for(let t=0;t<e.frames.length;t++)if(e.frames[t]===r){const t=Array.from(e.document.getElementsByTagName("iframe")).concat(Array.from(e.document.getElementsByTagName("frame")));for(let e of t)e.contentWindow===r&&(n=e.getBoundingClientRect(),i.push({x:n.x,y:n.y}));r=e;break}}return i.reduce((t,e)=>({x:t.x+e.x,y:t.y+e.y}),{x:0,y:0})}function b(t,e=null){let n=t.getBoundingClientRect();if(e&&(n=e.getBoundingClientRect()),t.ownerDocument!==document){const e=m(t.ownerDocument.defaultView.frameElement),r={x:n.x+e.x,y:n.y+e.y,left:n.left+e.x,top:n.top+e.y,bottom:n.bottom+e.y,height:n.height,right:n.right+e.x,width:n.width};n={...r,toJSON:function(){return JSON.stringify(n)}}}return n}n.d(e,"h",(function(){return r})),n.d(e,"a",(function(){return i})),n.d(e,"m",(function(){return o})),n.d(e,"i",(function(){return s})),n.d(e,"d",(function(){return a})),n.d(e,"b",(function(){return d})),n.d(e,"e",(function(){return c})),n.d(e,"o",(function(){return l})),n.d(e,"j",(function(){return u})),n.d(e,"l",(function(){return h})),n.d(e,"n",(function(){return p})),n.d(e,"c",(function(){return f})),n.d(e,"k",(function(){return g})),n.d(e,"g",(function(){return m})),n.d(e,"f",(function(){return b}))},,function(t,e,n){"use strict";function r(t){return t+"px"}function i(t){return null==t?null:r(t)}n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return i}))},,,,function(t,e,n){"use strict";n.d(e,"a",(function(){return I})),n.d(e,"b",(function(){return x}));var r=n(62),i=n(53),o=n(11),s=n(77);const a=(t,e)=>({displayed:[],push:(e,n)=>{function r(t){const r=t.filter(t=>t.id==e.id)[0],i=t.indexOf(r);if(r){const n=t.slice(0);return n[i]=e,n}return"end"==n?[...t.slice(0,5),{id:e.id,rawText:e.rawText}]:[{id:e.id,rawText:e.rawText},...t.slice(0,5)]}e.id&&e.rawText&&t(t=>({...t,notifications:{...t.notifications,displayed:r(t.notifications.displayed)}}))},consume:(n,r)=>{const i=e().notifications.displayed.some(t=>t.id==n);t(t=>({...t,notifications:{...t.notifications,displayed:[...t.notifications.displayed.filter(t=>t.id!=n)]}})),i&&Object(o.b)(s.a,{id:n,nonDirectInteraction:r})}});var d=n(33),c=n(19),l=n(31);const u=(t,e)=>{var n;return{descriptor:null===(n=d.a.config)||void 0===n?void 0:n.inAppCenter,isOpen:!1,sizing:"std",mode:"btn",searchQ:"",launcherElement:null,setLauncherElement(t,e){Object(l.a)(n=>{n.inAppCenter.launcherElement=t,n.inAppCenter.mode=e})},homeAnimated:[],setHomeAnimated(){Object(l.a)(t=>{t.inAppCenter.homeAnimated.push(t.inAppCenter.openSession)})},searchMode:!1,setSearchMode(t){Object(l.a)(e=>{e.inAppCenter.searchMode=t})},isHidden:!1,setFullVisibility(t){Object(l.a)(e=>{e.inAppCenter.isHidden=!t})},setSearchQ(t){Object(l.a)(e=>{e.inAppCenter.searchQ=t})},overrideHeaderConfiguration(t){Object(l.a)(e=>{e.inAppCenter.headerConfiguration=t})},setFocusedHomeItemId(t){Object(l.a)(e=>{e.inAppCenter.focusedHomeItemId=t})},togglePanelVisibility:t=>{Object(l.a)(e=>{e.inAppCenter.isOpen=t,e.inAppCenter.openSession=Object(c.a)()})},changeSizingMode:t=>{Object(l.a)(e=>{e.inAppCenter.sizing=t})},currentSection:"home",setCurrentSection:t=>{Object(l.a)(e=>{e.inAppCenter.currentSection=t})}}};var h=n(5),p=n(32);let f;function g(t){console.log("PF surveys - not supported branching #"+t)}!function(t){t[t.Open=1]="Open",t[t.ClosedDone=2]="ClosedDone",t[t.ClosedNotDone=3]="ClosedNotDone"}(f||(f={}));var m=n(85),b=n(24),v=n(10);function w(t,e,n,r){var i,o;if(window.ProductFruitsDesigner)return;const s={username:v.a.user.username,vds:n,sesId:t.sesId,sesState:e,hmac:null!==(i=null===v.a||void 0===v.a||null===(o=v.a.user)||void 0===o?void 0:o.hmac)&&void 0!==i?i:void 0,snooze:null==r?void 0:r.snoozeForInterval};return Object(p.a)(`/api/v1/stats/${h.a.code}/surveys/${t.surveyId}/event`,s)}var y=n(74),C=n(21),k=n(2);const O=(t,e)=>{var n,r;return{descriptor:null!==(n=null===d.a||void 0===d.a||null===(r=d.a.config)||void 0===r?void 0:r.surveys)&&void 0!==n?n:{items:[]},setRenderedSurveyId(e){t(t=>({...t,surveys:{...t.surveys,renderedSurveyId:e}}))},fetchedSurveyIds:[],fetchDetailsWithCaching:async n=>{const r=e().surveys.fetchedSurveyIds,i=n.filter(t=>-1===r.indexOf(t));if(i.length>0){var o,s,a;r.push(...n);var d=v.a.getCurrentIdentity();return Object(p.a)(`/api/v2/stats/${h.a.code}/surveys/public-batch`,{ids:i,username:null==d?void 0:d.user.username,hmac:null!==(o=null==d||null===(s=d.user)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.hmac)&&void 0!==o?o:void 0}).then(e=>{const n=e.map(t=>t.id);t(t=>{var r,i;return{...t,surveys:{...t.surveys,descriptor:{items:null===(r=t.surveys.descriptor)||void 0===r||null===(i=r.items)||void 0===i?void 0:i.map(t=>{const r=e.filter(e=>e.id==t.id)[0];return-1!==n.indexOf(t.id)?{...t,questions:r.questions,groups:r.groups,branching:r.branching,clrBg:r.clrBg,clrBtnBg:r.clrBtnBg,clrBtnTxt:r.clrBtnTxt,clrTxt:r.clrTxt}:{...t}})}}}})})}return new Promise(t=>t())},stepsManagement:{goToNextStep(){let n,r,i;t(t=>{var e,o,s,a;const d=Object(b.a)(t),c=t.surveys.stepsManagement.currentStepId,l=null===(e=d.branching)||void 0===e?void 0:e.filter(t=>t.refId==c)[0];let u=null,h=!1;const p=Object(b.b)(d);if(l){const e=function(t,e){const n=t.rulesets.map(t=>({res:t.rules.map(t=>{var n;const r=null===(n=e.find(e=>e.qId==t.qId))||void 0===n?void 0:n.answer;if("eq"==t.op)return r==t.val;if("neq"==t.op)return r!=t.val;if("gt"==t.op)return r>t.val;if("gte"==t.op)return r>=t.val;if("lt"==t.op)return r<t.val;if("lte"==t.op)return r<=t.val;if("is"==t.op||"in"==t.op){if(Array.isArray(r)){if(0==r.length)return!1;if(Array.isArray(t.val)){const e="is"==t.op?"every":"some";return t.val[e](t=>r.includes(t))}return g(4),!1}return r==t.val}if("isnt"==t.op)return Array.isArray(r)?(g(3),!1):r!=t.val;g(99)}).every(t=>t),set:t}));for(const t of n)if(t.res)return t.set.target;return t.else}(l,t.surveys.answers.filter(t=>t.sesId==d.sesId));"fin"==e?h=!0:u=p.find(t=>t.id==e)}if(!(l&&u||h)){const t=p.slice().sort(b.d),e=t.findIndex(t=>t.id==c);u=t[e+1]}return n=null!==(o=u)&&void 0!==o&&o.id?null:d.sesId,r=n?d.id:null,i=n?d.name:null,{...t,surveys:{...t.surveys,renderedSurveyId:n?null:t.surveys.renderedSurveyId,descriptor:{...t.surveys.descriptor,items:null===(s=t.surveys.descriptor.items)||void 0===s?void 0:s.map(t=>t.id==d.id&&n?{...t,sesId:null,usrSt:n&&r&&f.ClosedDone}:t)},stepsManagement:{...t.surveys.stepsManagement,currentStepId:null===(a=u)||void 0===a?void 0:a.id}}}}),n&&r&&(w({surveyId:r,sesId:n},f.ClosedDone,[]),E(e(),r,n),j(e(),r,n,!0,i))},startOrResume:()=>{let e=null;t(t=>{var n;const r=Object(b.a)(t),i=Object(b.b)(r);return e=null==i||null===(n=i[0])||void 0===n?void 0:n.id,{...t,surveys:{...t.surveys,stepsManagement:{...t.surveys.stepsManagement,currentStepId:e}}}})}},close(n){let r=null,i=null;t(t=>{var e,o;return{...t,surveys:{...t.surveys,renderedSurveyId:null,descriptor:{...t.surveys.descriptor,items:null===(e=t.surveys.descriptor)||void 0===e||null===(o=e.items)||void 0===o?void 0:o.map(t=>t.id==n?(r=t.sesId,i=t.name,{...t,sesId:null,usrSt:f.ClosedNotDone}):t)}}}}),w({surveyId:n,sesId:r},f.ClosedNotDone,[]),E(e(),n,r),j(e(),n,r,!1,i)},snooze(n){var r;let i=null,o=null,s=null;t(t=>{var e,r;return{...t,surveys:{...t.surveys,renderedSurveyId:null,descriptor:{...t.surveys.descriptor,items:null===(e=t.surveys.descriptor)||void 0===e||null===(r=e.items)||void 0===r?void 0:r.map(t=>t.id==n?(i=t.sesId,o=t.name,s=t.snooze,{...t,sesId:null,usrSt:f.Open}):t)}}}}),w({surveyId:n,sesId:i},f.Open,[],{snoozeForInterval:null!==(r=s)&&void 0!==r?r:1}),E(e(),n,i)},answers:[],answerQuestion(n,r,i){t(t=>{const e=Object(b.a)(t);return!!t.surveys.answers.find(t=>t.sId==e.id&&t.qId==n&&t.sesId==e.sesId)?{...t,surveys:{...t.surveys,answers:t.surveys.answers.map(t=>t.sId==e.id&&t.qId==n&&t.sesId==e.sesId?null!=i&&i.isOtherChoice?{...t,addit:r}:null!=i&&i.isArrayToggle?{...t,answer:Object(m.b)(t.answer,r)}:{...t,answer:r}:t)}}:{...t,surveys:{...t.surveys,answers:[...t.surveys.answers,{answer:null!=i&&i.isArrayToggle?[r]:r,qId:n,sId:e.id,sesId:e.sesId}]}}});const o=Object(b.a)(e()),s=Object(b.c)(e(),n);!0!==(null==i?void 0:i.skipServerSync)&&w({surveyId:o.id,sesId:o.sesId},f.Open,[{qId:n,stepId:e().surveys.stepsManagement.currentStepId,answer:Object(y.a)(s.answer),addit:Object(y.a)(s.addit)}])}}};function j(t,e,n,r,i){const s=t.surveys.answers.filter(t=>t.sesId==n);Object(o.b)("survey-closed",{surveyId:e,answers:s.map(t=>({sessionId:t.sesId,additText:t.addit,answer:t.answer,questionId:t.qId})),reason:r?"last_screen":"close_button"}),C.a.getInstance().trackEvent("Survey Closed",{answersCount:s.length,name:Object(k.a)("anlnms")?i:""})}function E(t,e,n){var r,i,o,s,a;const d=null!==(r=null===(i=t.surveys.descriptor)||void 0===i||null===(o=i.items)||void 0===o||null===(s=o.find(t=>t.id==e))||void 0===s||null===(a=s.questions)||void 0===a?void 0:a.filter(t=>t.usrProp))&&void 0!==r?r:[];!function(t){var e,n;if(!window.productFruitsUser)return;if(!t||0==Object.keys(t).length)return;const r=structuredClone(window.productFruitsUser);r.props=Object.assign(null!==(e=r.props)&&void 0!==e?e:{},t),null===(n=window.productFruits)||void 0===n||n.identifyUser(r)}(t.surveys.answers.filter(t=>t.sesId==n).reduce((t,e)=>{const n=d.find(t=>t.id==e.qId);return n&&t.push({answer:e,usrProp:n.usrProp}),t},[]).reduce((t,e)=>(t[e.usrProp]=e.answer.answer,t),{}))}const I=Object(r.createStore)()((...t)=>({announcements:{...Object(i.a)(...t)},notifications:{...a(...t)},inAppCenter:{...u(...t)},surveys:{...O(...t)}})),x=t=>Object(r.useStore)(I,t)},,,,,function(t,e,n){"use strict";var r=n(9),i=n(1),o=n(3),s=n(67),a=n(34);const d=new class{constructor(t=null){this.logs=[],this.onLogCallback=()=>{}}setLogCallback(t){this.onLogCallback=t}initializeUI(){this.container=r.a.getSubContainer("debugger"),this.rootEl=Object(i.h)("div",{className:Object(i.i)("debugger-holder")},Object(i.h)("div",{className:Object(i.i)("debugger-title"),onmousedown:t=>{this.isMoving=!0;const e=t.path[2].getBoundingClientRect();this.movingOffsetX=t.screenX-e.left,this.movingOffsetY=t.screenY-e.top,t.stopPropagation(),t.preventDefault()}},Object(i.h)("strong",null,"Product Fruits debugger"),Object(i.h)("div",{style:{marginLeft:"auto",cursor:"pointer"},onClick:()=>{this.detach()}},"Close"))),this.contentEl=Object(i.h)("div",{style:{display:"flex",flexDirection:"column"}}),this.rootEl.appendChild(this.contentEl),this.groups=new Map,this.isAttached&&this.attach(),window.onmousemove=t=>{if(this.isMoving){t.stopPropagation(),t.preventDefault();const e={x:t.screenX-this.movingOffsetX,y:t.screenY-this.movingOffsetY};e.x<0&&(e.x=0),e.x>window.innerWidth-50&&(e.x=window.innerWidth-50),e.y<0&&(e.y=0),e.y>window.innerHeight-50&&(e.y=window.innerHeight-50),this.rootEl.style.bottom="unset",this.rootEl.style.left=Object(o.a)(e.x),this.rootEl.style.top=Object(o.a)(e.y)}},window.onmouseup=t=>{this.isMoving=!1,s.a.setObject("debugger_position",{x:this.rootEl.style.left,y:this.rootEl.style.top})},this.rootEl.style.bottom="20px",this.rootEl.style.left="20px"}get isAttached(){return localStorage.getItem("productfruits_debugger")}set isAttached(t){t?localStorage.setItem("productfruits_debugger",1):localStorage.removeItem("productfruits_debugger")}logImportantMessage(t,e,n){this.logColored("important","#C8CDD0",null,t,e,n)}logSuccessMessage(t,e,n){this.logColored("success","#82DD55",null,t,e,n)}logInfoMessage(t,e,n){this.logColored("info",null,null,t,e,n)}logColored(t,e,n,r,o,s){const a={type:t,group:o,groupId:s,htmlContent:r};this.logs.push(a);try{this.onLogCallback(a)}catch(t){}if(this.groups)try{if(!this.isAttached)return;const t=this.getOrCreateGroupContentElement(o),s=Object(i.h)("div",null,r);s.innerHTML=r,t.appendChild(Object(i.h)("li",{style:{backgroundColor:e,color:n}},s))}catch(t){console.log("PF ERROR",t)}}getOrCreateGroupContentElement(t,e=!1){if(this.groups.has(t)){const e=this.groups.get(t),n=e.getElementsByClassName(Object(i.i)("debugger-group-header-counter"))[0],r=parseInt(n.textContent)+1;return n.textContent=r+" logs",e.getElementsByTagName("ul")[0]}const n=Object(i.h)("ul",{className:Object(i.i)("debugger-logs-list")}),r=Object(i.h)("div",{className:Object(i.i)("debugger-group")},Object(i.h)("div",{className:Object(i.i)("debugger-group-header"),onClick:()=>{const t=r.getElementsByClassName(Object(i.i)("debugger-group-header"))[0];"false"==t.getAttribute("data-pf-collapsed")?t.setAttribute("data-pf-collapsed","true"):t.setAttribute("data-pf-collapsed","false")}},Object(i.h)("div",null,t),Object(i.h)("div",{className:Object(i.i)("debugger-group-header-counter")},"1 log"),Object(i.h)("div",{className:Object(i.i)("debugger-clear-button"),onClick:t=>{n.innerHTML="",r.getElementsByClassName(Object(i.i)("debugger-group-header-counter"))[0].textContent="0 logs",t.stopPropagation()}},"Clear")));return r.getElementsByClassName(Object(i.i)("debugger-group-header"))[0].setAttribute("data-pf-collapsed","true"),r.appendChild(n),this.groups.set(t,r),this.contentEl.appendChild(r),n}attach(t){Object(a.b)()||(this.isAttached=!0,this.container.appendChild(this.rootEl),t&&(this.rootEl.style.top=null,this.rootEl.style.right=null,this.rootEl.style.bottom="20px",this.rootEl.style.left="20px"))}detach(){this.isAttached=!1,this.container.innerHTML=""}};e.a=d},function(t,e,n){"use strict";n.d(e,"b",(function(){return d})),n.d(e,"a",(function(){return c})),n.d(e,"c",(function(){return u}));var r=n(15),i=n(8),o=n(2),s=n(14),a=n(65);function d(t){if(!t)return!0;if(t.equals)return Object(s.a)().toLowerCase()===t.equals.toLowerCase();if(t.startsWith)return Object(s.a)().toLowerCase().startsWith(t.startsWith.toLowerCase());if(t.endsWith)return Object(s.a)().toLowerCase().endsWith(t.endsWith.toLowerCase());if(t.contains)return-1!==Object(s.a)().toLowerCase().indexOf(t.endsWith.toLowerCase());if(null!=t.parametrized){if(t.origParametrized=t.origParametrized?t.origParametrized:t.parametrized,!Object(o.a)("url_cmp2")&&t.parametrized.startsWith("/")){const e=location.protocol+"//"+location.hostname+(location.port?":"+location.port:"");t.parametrized=e+t.parametrized}if(Object(o.a)("url_cmp2")){if("[dynamic]"==t.parametrized)return!0;if(!t.parametrized.startsWith("http://")&&!t.parametrized.startsWith("https://")){const e=location.protocol+"//"+location.hostname+(location.port?":"+location.port:""),n=t.parametrized.startsWith("/");t.parametrized=e+(n?"":"/")+t.parametrized}if(t.parametrized.endsWith("/")&&(t.parametrized=t.parametrized.slice(0,-1)),""==t.parametrized&&(t.parametrized="/"),Object(o.a)("urlenc"))try{t.parametrized=decodeURI(t.parametrized)}catch(t){}}let n=u(u(Object(a.a)(t.parametrized.toString()),"\\[","["),"\\]","]"),d=/(\[[^\]]*\])/gim,c=void 0,h=[];for(;null!==(c=d.exec(t.parametrized));)h.push(c[0]);if(Object(o.a)("url_cmp2")&&(t.parametrized=t.parametrized.toLowerCase()),h&&h.length>0){for(let t=0;t<h.length;t++){const e=h[t];if(e.startsWith("[d.")){const t=l(e.replace("[d.",""),"]"),o=Object(r.c)(t,window.productFruitsUser);void 0===o&&i.a.verbose("Parametrized value not found:",t,o);const s=u(e,".","\\.");n=n.replace(s,o)}else"[dynamic]"===e?n=n.replace("[dynamic]","(.*)"):"[urlsegment]"===e?n=n.replace("[urlsegment]","([^/?]*)"):"[dynamic:num]"===e?n=n.replace("[dynamic:num]","(\\d+)"):"[dynamic:str]"===e&&(n=n.replace("[dynamic:str]","([^0-9]+)"))}Object(o.a)("url_cmp2")&&(n+="([/]?)$")}else t.parametrized.startsWith("http")||t.parametrized.startsWith("/")?n+="$":(n+="([/]?)$",n="([/])"+n);var e=new RegExp(n,"mi");if(Object(o.a)("url_cmp2")){let n=Object(s.a)().replace(/\/+$/,"").toLowerCase();if(Object(o.a)("urlenc"))try{n=decodeURI(n)}catch(t){}return t.parametrized=t.origParametrized,e.test(n)}return e.test(Object(s.a)().toLowerCase())}return!1}function c(t){if(!t)return{success:!1};if(t.equals)return t.equals;if(t.startsWith)throw new Error("Cannot construct URL from startsWith");if(t.endsWith)throw new Error("Cannot construct URL from endsWith");if(t.contains)throw new Error("Cannot construct URL from contains");if(t.parametrized){let e=t.parametrized.toString(),n=/(\[[^\]]*\])/gim,i=null;for(;null!==(i=n.exec(t.parametrized));)if(i&&i.length>1)for(let t=1;t<i.length;t++){const n=i[t];if(n.startsWith("[d.")){const t=l(n.replace("[d.",""),"]"),i=Object(r.c)(t,window.productFruitsUser);e=e.replace(n,i)}}return{success:-1===t.parametrized.indexOf("[dynamic]"),url:e}}return{success:!1}}function l(t,e){for(var n=0,r=t.length;n<r&&e.indexOf(t[n])>=0;)++n;for(;r>n&&e.indexOf(t[r-1])>=0;)--r;return n>0||r<t.length?t.substring(n,r):t}function u(t,e,n){return t?t.split(e).join(n||""):t}},,function(t,e,n){"use strict";n.d(e,"a",(function(){return l})),n.d(e,"e",(function(){return u})),n.d(e,"c",(function(){return h})),n.d(e,"b",(function(){return p})),n.d(e,"d",(function(){return f}));var r=RegExp(['"(?:\\\\.|[^"])*"',"'(?:\\\\.|[^'])*'","`(?:\\\\.|[^`])*`","/\\*(?:[^*]|\\*+[^*/])*\\*+/","//.*\n","/(?:\\\\.|[^/])+/w*","[^\\s:,/][^,\"'`{}()/:[\\]]*[^\\s,\"'`{}()/:[\\]]","[^\\s]"].join("|"),"g"),i=/[\])"'A-Za-z0-9_$]+$/,o={in:1,return:1,typeof:1};var s=n(8),a=n(18),d=n(2),c=(n(5),n(14));function l(t,e,n,u,p){const f=p&&p.skipPlaceholderReplacement;var g=n||window.productFruits.language,m=[];if(t.hasAttribute("data-pfbind-icon")&&(t.textContent="ico"),t.hasAttribute("data-pfbind-text")){var b=h(t.getAttribute("data-pfbind-text"),e);t.innerHTML=b&&b[g]?Object(a.a)(b[g],{skip:f}):""}if(t.hasAttribute("data-pfbind-visible")){var v=h(t.getAttribute("data-pfbind-visible"),e);t.style.display=!1===v?"none":""}if(t.hasAttribute("data-pfbind-visible-true")){v=h(t.getAttribute("data-pfbind-visible-true"),e);t.style.display=!0===v?"":"none"}if(t.hasAttribute("data-pfbind-youtube")){var w=h(t.getAttribute("data-pfbind-youtube"),e);if(w){t.innerHTML="";var y=document.createElement("iframe");y.allow="autoplay;fullscreen";var C=!0===u?0:1;y.src="https://www.youtube.com/embed/"+w[g]+"?autoplay="+C+"&modestbranding=1&controls=1&rel=0&loop=1&playlist="+w[g],y.className="pf-designer-video-youtube",t.appendChild(y),t.dataset.youtubeUrl=w[g]}}if(t.hasAttribute("data-pfbind-remove-el")&&t.addEventListener("click",()=>{var e=t.closest(t.getAttribute("data-pfbind-remove-el"));e&&e.remove()}),t.hasAttribute("data-pfbind-attr-placeholder")){let n=h(t.getAttribute("data-pfbind-attr-placeholder"),e);t.placeholder=n&&n[g]?n[g]:""}if(t.hasAttribute("data-pfbind-foreach")){var k=h(t.getAttribute("data-pfbind-foreach"),e),O=t.firstElementChild.content.cloneNode(!0),j=t.getAttribute("data-pfbind-foreach-clb");for(var E of(t.innerHTML="",k))if(!(j&&p&&p.callbacks&&p.callbacks[j])||p.callbacks[j]()){var I=document.importNode(O.firstElementChild,!0);t.appendChild(I),l(I,E,n),m.push(I)}}if(t.hasAttribute("data-pfbind-start-tour")){var x=parseInt(t.getAttribute("data-pfbind-start-tour"));t.addEventListener("click",t=>{try{if(window.ProductFruitsDesigner)return;window.productFruits.contextHelp.closeCurrentCard(),Object(d.a)("nvurldl")?setTimeout(()=>{window.productFruits.toursFactory.startTour(x,{forceForUser:!0,autoStartRedirect:!0,ignoreLaunchRules:!Object(d.a)("lgc_tr_evl")})},[500]):window.productFruits.toursFactory.startTour(x,{forceForUser:!0,autoStartRedirect:!0,ignoreLaunchRules:!Object(d.a)("lgc_tr_evl")})}catch(t){s.a.error(t)}Object(d.a)("btns_not_stpprop")||(t.preventDefault(),t.stopPropagation())})}if(t.hasAttribute("data-pfbind-link")||t.hasAttribute("data-pfbind-link-blank")||t.hasAttribute("data-pfbind-link-blank-adv")){const e=Object(a.a)(t.getAttribute("data-pfbind-link")||t.getAttribute("data-pfbind-link-blank")||t.getAttribute("data-pfbind-link-blank-adv"),{skip:f}),n=t.hasAttribute("data-pfbind-link-blank")||t.hasAttribute("data-pfbind-link-blank-adv");t.addEventListener("click",t=>{n?window.open(e,"_blank"):Object(d.a)("nvurldl")?setTimeout(()=>{Object(c.b)(e)},[500]):Object(c.b)(e),t.preventDefault(),t.stopPropagation()})}if(t.hasAttribute("data-pfbind-renderblocks")||t.hasAttribute("data-pfbind-renderblocksorcontent")){var S=h(t.getAttribute("data-pfbind-renderblocks")||t.getAttribute("data-pfbind-renderblocksorcontent"),e);if(S){var _=S[g];if(_&&_.meta&&_.meta.blocks){t.innerHTML="";let e=function(t){if(!t||!t.length)return;let e=document.createElement("div");for(let o of t)if("header"==o.type){let t=document.createElement("h"+o.data.level);t.innerHTML=o.data.text,t.style.textAlign=o.data.alignment,e.appendChild(t)}else if("paragraph"==o.type){let t=document.createElement("p");t.innerHTML=o.data.text,t.style.textAlign=o.data.alignment,e.appendChild(t)}else if("image"==o.type){let t=document.createElement("div"),n=document.createElement("div");t.style.textAlign=o.data.alignment||"center",n.style.display="inline-block",t.appendChild(n);let r=document.createElement("img");r.src=o.data.file.url,r.style.width=o.data.zoom,n.appendChild(r),e.appendChild(t)}else if("embed"==o.type){if(o.data.embed){var n=document.createElement("iframe");n.src=o.data.embed+"?autoplay=0&modestbranding=1&controls=1&rel=0",n.style.border="none",n.style.width="640px",n.style.height="385px",n.style.display="block",n.style.marginLeft="auto",n.style.marginRight="auto",e.appendChild(n)}}else if("list"==o.type){(r=document.createElement("unordered"===o.data.style?"ul":"ol")).className="productfruits--list";for(let t of o.data.items){let e=document.createElement("li");e.innerHTML=t,r.appendChild(e)}e.appendChild(r)}else if("quote"==o.type){var r;(r=document.createElement("div")).innerHTML=o.data.text,r.className="productfruits--quote",e.appendChild(r)}else if("delimiter"==o.type){var i=document.createElement("div");i.className="productfruits--delimiter",e.appendChild(i)}return e}(_.meta.blocks);e&&t.appendChild(e)}else _&&_.substring?t.innerHTML=t.hasAttribute("data-pfbind-renderblocksorcontent")?Object(a.a)(_,{skip:f}):"":t.innerHTML=""}else t.innerHTML=""}if(t.hasAttribute("data-pfbind-component")){var T=t.getAttribute("data-pfbind-component");if(t.innerHTML="",T){let e=window["___pf_registered_component_"+T];if(e){let n=new e,s=function(t){var e=t.trim();123===e.charCodeAt(0)&&(e=e.slice(1,-1));var n,s=[],a=(e+="\n,").match(r),d=[],c=0;if(a.length>1){for(var l,u=0;l=a[u];++u){var h=l.charCodeAt(0);if(44===h){if(c<=0){s.push(n&&d.length?{key:n,value:d.join("")}:{unknown:n||d.join("")}),n=c=0,d=[];continue}}else if(58===h){if(!c&&!n&&1===d.length){n=d.pop();continue}}else{if(47===h&&l.length>1&&(47===l.charCodeAt(1)||42===l.charCodeAt(1)))continue;if(47===h&&u&&l.length>1){var p=a[u-1].match(i);p&&!o[p[0]]&&(a=(e=e.substr(e.indexOf(l)+1)).match(r),u=-1,l="/")}else 40===h||123===h||91===h?++c:41===h||125===h||93===h?--c:n||d.length||34!==h&&39!==h||(l=l.slice(1,-1))}d.push(l)}if(c>0)throw Error("Unbalanced parentheses, braces, or brackets")}return s}(t.getAttribute("data-pfbind-component-params")),a={};s.forEach(t=>{let e=t.value;e&&"'"===e[0]&&(e=e.substr(1,e.length-2)),a[t.key]=e}),t.appendChild(n.render(t,a))}else console.info("The required component '"+e+"' is not registered")}}for(var F of t.children)"TEMPLATE"===F.tagName||-1!==m.indexOf(F)||F.hasAttribute("data-pfbindstopparent")||l(F,e,n);return t}function u(t,e){window["___pf_registered_component_"+t]=e}function h(t,e){for(var n=t.split("."),r=e,i=0;i<n.length;i++){if(null==r)return;r=r[n[i]]}return r}function p(t,e){for(var n=t,r=e,i=0;i<n.length;i++){if(null==r)return;r=r[n[i]]}return r}function f(t,e,n,r=null){var i=null;i=r&&null!=r?r.getElementsByClassName(e):document.getElementsByClassName(e);for(let e of i)e.addEventListener(t,n);return()=>{for(let e of i)e.removeEventListener(t,n)}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return o}));var r=n(2);function i(t){return t.id?document.getElementById(t.id):t.query?document.querySelector(t.query):void 0}function o(t){try{const e=Object(r.a)("iframes")&&t.iframe?document.querySelector(t.iframe):null,n=e?e.contentDocument:document;if(t.id)return n.getElementById(t.id);if(t.query)return n.querySelector(t.query)}catch(t){return null}}},,function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var r=n(15),i=n(2),o=n(65),s=n(13),a=n(10);function d(t,{skip:e}={}){if(!Object(i.a)("placeholders"))return t;if(!0===e)return t;if("string"!=typeof t)return t;if(t&&-1===t.indexOf("{{"))return t;Object(s.c)(Object(s.c)(Object(o.a)(t),"\\{","{"),"\\}","}");const n=/{{(.*?)}}/gim,d=[];let c=void 0;for(;null!==(c=n.exec(t));)d.push(c[0]);for(const e of d){let n=e.substring(2,e.length-2);let i="";if(-1!==n.indexOf("|")){const t=n.split("|");n=(t[0]||"").trim(),i=t[1]||""}var l;if("$language"==n)t=Object(s.c)(t,e,(null===(l=window.productFruits)||void 0===l?void 0:l.language)||i||e);else if("$hmac"==n){var u,h=a.a.getCurrentIdentity();h||(t=Object(s.c)(t,e,""));var p={username:h.user.username,hmac:{hash:h.user.data.hmac.hash,expiration:null!==(u=h.user.data.hmac.expiration)&&void 0!==u?u:void 0}};t=Object(s.c)(t,e,"hmac="+encodeURIComponent(JSON.stringify(p)))}else{const o=Object(r.c)(n,window.productFruitsUser);t=Object(s.c)(t,e,o||i||e)}}return t}},,,function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n(11),i=n(2),o=n(5),s=n(8),a=n(27),d=n(10);let c=null;class l{constructor(t){this.config=t,this.integrators=[],this.proxiedUsed=!1,this.init()}init(){if(this.config)for(const t of this.config)if("mixpanel"===t.type)this.integrators.push(new p);else if("ganalytics"===t.type)this.integrators.push(new f);else if("heap"===t.type)this.integrators.push(new m);else if("smartlook"===t.type)this.integrators.push(new b);else if("sessionstack"===t.type)this.integrators.push(new v);else if("customerio"===t.type)this.integrators.push(new w);else if("hubspot"===t.type)this.integrators.push(new y);else if("segment"===t.type)this.integrators.push(new C);else if("gtmev"===t.type)this.integrators.push(new g);else{if(this.proxiedUsed)continue;("acmpgn"===t.type||"hubspot_proxy"===t.type)&&(this.integrators.push(new k),this.proxiedUsed=!0)}else this.integrators=[];this.integrators.push(new h)}willTrackLater(t){this.integrators.forEach(e=>{try{e.willTrackEvent(t)}catch(t){}})}trackEvent(t,e,n){this.integrators.forEach(r=>{try{r.trackEvent(t,e,n)}catch(t){}}),this.integrators.length>0&&s.a.verbose("External event tracked",t,e)}static build(t){const e=new l(t);c=e,s.a.verbose("Creating PFIntegratorInstance",e,c)}static getInstance(){return c||{trackEvent:()=>{},willTrackLater:()=>{}}}}class u{constructor(){this.translatedEvents=[{event:"tour_started",name:"Tour started"},{event:"tour_started_from_button",name:"Tour started (Life Ring button)"},{event:"tour_finished",name:"Tour finished"},{event:"tour_skipped",name:"Tour skipped"},{event:"tour_card_loaded",name:"Tour - Card open"},{event:"tour_card_read",name:"Tour - Card read"},{event:"tour_card_button_click",name:"Tour - Custom button clicked"},{event:"tour_card_back",name:"Tour - Card step back"},{event:"changelog_loaded",name:"Announcement open"},{event:"context_help_loaded",name:"Hint open"},{event:"context_help_dismissed",name:"Hint dismissed forever"},{event:"mood_gathered",name:"Mood gathered"},{event:"feedback_sent",name:"Feedback sent"},{event:"button_widget_click",name:"Life Ring button - Widget click"},{event:"button_changelogs_click",name:"Life Ring button - Announcements click"},{event:"checklist_done",name:"Checklist completed"},{event:"checklist_dismissed",name:"Checklist dismissed"},{event:"announcements_banner_opened",name:"Announcements Banner Opened"},{event:"announcements_banner_dismissed",name:"Announcements Banner Dismissed"},{event:"announcements_banner_action_consumed",name:"Announcements Banner Action Consumed"},{event:"announcements_popup_opened",name:"Announcements Popup Opened"},{event:"announcements_popup_dismissed",name:"Announcements Popup Dismissed"},{event:"announcements_popup_dismissed",name:"Announcements Popup Dismissed"},{event:"announcements_popup_action_consumed",name:"Announcements Popup Action Consumed"},{event:"announcements_popup_stack_dimissed",name:"Announcements Popups Stack Dismissed"},{event:"announcements_newsitem_action_consumed",name:"Announcements Newsfeed Item Consumed"}]}translateEvent(t){const e=this.translatedEvents.filter(e=>e.event==t)[0];return e?e.name:t}willTrackEvent(t){}trackEvent(t,e){}}class h extends u{constructor(){super()}trackEvent(t,e){Object(r.b)("pf_custom_event_fired",{event:t,data:e})}}class p extends u{constructor(){super()}willTrackEvent(t){if(window.mixpanel&&window.mixpanel.track){window.mixpanel.time_event(this.translateEvent(t))}}trackEvent(t,e){if(window.mixpanel&&window.mixpanel.track){const n=window.mixpanel,r=Object.assign({},e,{pfVendorName:"Product Fruits",$source:"product_fruits"});n.track(this.translateEvent(t),r)}}}class f extends u{constructor(){super(),this.eventsMapper=[{eventPrefix:"tour_card_",eventLabel:t=>t.cardName},{eventPrefix:"tour_",eventLabel:t=>t.tourName},{eventPrefix:"context_help_loaded",eventLabel:t=>t.cardName},{eventPrefix:"context_help_dismissed",eventLabel:t=>t.cardName},{eventPrefix:"changelog_loaded",eventLabel:t=>t.title_en||t.title_cs},{eventPrefix:"mood_gathered",eventLabel:t=>t.rating},{eventPrefix:"checklist_done",eventLabel:t=>t.checklistName},{eventPrefix:"checklist_dismissed",eventLabel:t=>t.checklistName},{eventPrefix:"announcements_",eventLabel:t=>t.name},{eventPrefix:"Survey ",eventLabel:t=>t.name}]}getEventLabel(t,e){const n=this.eventsMapper.filter(e=>t.startsWith(e.eventPrefix))[0];return n?n.eventLabel(e):""}trackEvent(t,e,n){Object(i.a)("ga4cnsl")?window.gtag&&"function"==typeof window.gtag&&gtag("event",null!=n&&n.raw?"Product Fruits Custom Event":this.translateEvent(t),{event_category:"Product Fruits",event_label:null!=n&&n.raw?this.translateEvent(t):this.getEventLabel(t,e),...e}):Object(i.a)("ga4spr")&&window.google_tag_manager&&window.dataLayer?window.dataLayer.push({event:"PFruits - "+this.translateEvent(t),...e}):window.gtag&&"function"==typeof window.gtag?gtag("event",this.translateEvent(t),{event_category:"Product Fruits",event_label:null!=n&&n.raw?t:this.getEventLabel(t,e),...e}):window.ga&&"function"==typeof window.ga&&ga("send","event",{eventCategory:"Product Fruits",eventAction:this.translateEvent(t),eventLabel:null!=n&&n.raw?t:this.getEventLabel(t,e),...e})}}class g extends u{constructor(){super()}trackEvent(t,e){window.dataLayer&&window.dataLayer.push&&window.dataLayer.push({event:this.translateEvent(t),...e})}}class m extends u{constructor(){super()}trackEvent(t,e){if(window.heap&&"function"==typeof window.heap.track){const n=window.heap,r=Object.assign({},e,{pfVendorName:"Product Fruits"});n.track(this.translateEvent(t),r)}}}class b extends u{constructor(){super()}trackEvent(t,e){if(window.smartlook){const n=window.smartlook,r=Object.assign({},e,{pfVendorName:"Product Fruits"});n("track",this.translateEvent(t),r)}}}class v extends u{constructor(){super()}trackEvent(t,e){if(window.SessionStack){const n=window.SessionStack,r=Object.assign({},e,{pfVendorName:"Product Fruits",eventName:this.translateEvent(t)});n.log(r)}}}class w extends u{constructor(){super()}trackEvent(t,e){if(window._cio&&_cio.track){const n=Object.assign({},e,{pfVendorName:"Product Fruits",$source:"product_fruits"});window._cio.track(this.translateEvent(t),n)}}}class y extends u{constructor(){super()}trackEvent(t,e){if(window._hsq&&window._hsq.length){const n=Object.assign({},e,{pfVendorName:"Product Fruits",$source:"product_fruits"});window._hsq.push(["trackCustomBehavioralEvent",{name:this.translateEvent(t),properties:n}])}}}class C extends u{constructor(){super()}trackEvent(t,e){if(window.analytics&&window.analytics.track){const n=window.analytics,r=Object.assign({},e,{pfVendorName:"Product Fruits",$source:"product_fruits"});n.track(this.translateEvent(t),r)}}}class k extends u{constructor(){super(),this.eventsMapper=[{eventPrefix:"tour_card_",eventLabel:t=>t.cardName},{eventPrefix:"tour_",eventLabel:t=>t.tourName},{eventPrefix:"context_help_loaded",eventLabel:t=>t.cardName},{eventPrefix:"context_help_dismissed",eventLabel:t=>t.cardName},{eventPrefix:"changelog_loaded",eventLabel:t=>t.title_en||t.title_cs},{eventPrefix:"mood_gathered",eventLabel:t=>t.rating},{eventPrefix:"checklist_done",eventLabel:t=>t.checklistName},{eventPrefix:"checklist_dismissed",eventLabel:t=>t.checklistName}],this.enabledEvents=["checklist_done","checklist_dismissed","tour_started","tour_finished","tour_skipped","mood_gathered","feedback_sent"]}getEventLabel(t,e){const n=this.eventsMapper.filter(e=>t.startsWith(e.eventPrefix))[0];return n?n.eventLabel(e):""}trackEvent(t,e){var n,r,i;if(-1===this.enabledEvents.indexOf(t))return;var s=d.a.getCurrentIdentity();const c=`${Object(o.d)()}/api/v1/proxy-events/${window.productFruits.code}/gather`,l=this.getEventLabel(t,e);Object(a.d)(c,{userName:window.productFruitsUser.username,email:window.productFruitsUser.email,eventName:this.translateEvent(t),eventData:e,label:l,hmac:null!==(n=null==s||null===(r=s.user)||void 0===r||null===(i=r.data)||void 0===i?void 0:i.hmac)&&void 0!==n?n:void 0})}}},function(t,e,n){"use strict";n(21);let r=new class{dispatchToursLoaded(t){window.ProductFruitsDesigner||document.dispatchEvent(new CustomEvent("pfToursLoaded",{detail:{tours:t}}))}dispatchTourFinished(t){window.ProductFruitsDesigner||(document.dispatchEvent(new CustomEvent("pfTourStateChanged",{detail:{tour:t}})),window.dispatchEvent(new CustomEvent("pfTourFinished",{detail:{tour:t}})))}dispatchTourSkipped(t){window.ProductFruitsDesigner||(document.dispatchEvent(new CustomEvent("pfTourStateChanged",{detail:{tour:t}})),window.dispatchEvent(new CustomEvent("pfTourSkipped",{detail:{tour:t}})))}dispatchTourAdvanced(t){window.ProductFruitsDesigner||document.dispatchEvent(new CustomEvent("pfTourAdvanced",{detail:{tour:t}}))}dispatchTourBeforeAdvanced(t){window.ProductFruitsDesigner||document.dispatchEvent(new CustomEvent("pfTourBeforeAdvanced",{detail:{tour:t}}))}dispatchTourAttemptingStart(t){window.ProductFruitsDesigner||document.dispatchEvent(new CustomEvent("pfTourAttemptingStart",{detail:{tour:t}}))}dispatchButtonReady(){window.ProductFruitsDesigner||document.dispatchEvent(new CustomEvent("pfButtonReady",{}))}dispatchAnnouncementBannerSpacing(t){window.ProductFruitsDesigner||window.dispatchEvent(new CustomEvent("pfBannerSpacing",{detail:{target:"top",marginTop:t}}))}dispatchOneChecklistUpdated(t){window.ProductFruitsDesigner||window.dispatchEvent(new CustomEvent("pf_one_checklist_updated",{detail:{checklistId:t}}))}dispatchAllChecklistsUpdated(t){window.ProductFruitsDesigner||window.dispatchEvent(new CustomEvent("pf_all_checklists_updated",{detail:t}))}dispatchChecklistItemLaunched(t,e){window.ProductFruitsDesigner||window.dispatchEvent(new CustomEvent("pfChecklistItemLaunched",{detail:{id:t,customId:e}}))}dispatchChecklistItemCompleted(t,e){window.ProductFruitsDesigner||window.dispatchEvent(new CustomEvent("pfChecklistItemCompleted",{detail:{id:t,customId:e}}))}dispatchChecklistDismissed(t,e){window.ProductFruitsDesigner||window.dispatchEvent(new CustomEvent("pf_checklist_dismissed",{detail:{id:t,source:e}}))}dispatchChecklistEligibilityChanged(t,e){window.ProductFruitsDesigner||window.dispatchEvent(new CustomEvent("pfChecklistEligibilityChanged",{detail:{id:t,eligibility:e}}))}attachTourStateChanged(t){document.addEventListener("pfTourStateChanged",t)}detachTourStateChanged(t){document.removeEventListener("pfTourStateChanged",t)}attachTourFinished(t){window.addEventListener("pfTourFinished",e=>{t(e.detail.tour)})}attachTourFinished_disposable(t){const e=e=>{t(e.detail.tour)};return window.addEventListener("pfTourFinished",e),()=>{window.removeEventListener("pfTourFinished",e)}}attachChecklistItemLaunched_disposable(t){const e=e=>{const n=e.detail;t({internalId:n.customId,id:n.id})};return window.addEventListener("pfChecklistItemLaunched",e),()=>{window.removeEventListener("pfChecklistItemLaunched",e)}}attachChecklistItemCompleted_disposable(t){const e=e=>{const n=e.detail;t({internalId:n.customId,id:n.id})};return window.addEventListener("pfChecklistItemCompleted",e),()=>{window.removeEventListener("pfChecklistItemCompleted",e)}}detachTourFinished(t){window.removeEventListener("pfTourFinished",t)}attachTourSkipped(t){window.addEventListener("pfTourSkipped",e=>{t(e.detail.tour)})}attachTourSkipped_disposable(t){const e=e=>{t(e.detail.tour)};return window.addEventListener("pfTourSkipped",e),()=>{window.removeEventListener("pfTourSkipped",e)}}attachTourAdvanced(t){document.addEventListener("pfTourAdvanced",e=>{t(e.detail.tour)})}attachTourAdvanced_disposable(t){const e=e=>{t(e.detail.tour)};return document.addEventListener("pfTourAdvanced",e),()=>{document.removeEventListener("pfTourAdvanced",e)}}attachTourBeforeAdvanced_disposable(t){const e=e=>{t(e.detail.tour)};return document.addEventListener("pfTourBeforeAdvanced",e),()=>{document.removeEventListener("pfTourBeforeAdvanced",e)}}detachTourSkipped(t){window.removeEventListener("pfTourSkipped",t)}attachTourAttemptingStart(t){document.addEventListener("pfTourAttemptingStart",t)}attachButtonReady(t,e=!1){const n=()=>{t(),e&&document.removeEventListener("pfButtonReady",n)};document.addEventListener("pfButtonReady",n)}attachAnnouncementsBannerSpacing(t){document.addEventListener("pfBannerSpacing",t)}attachUserChanged_disposable(t){const e=()=>{t()};return window.addEventListener("pfruits_user_changed",e),()=>{window.removeEventListener("pfruits_user_changed",e)}}attachOneChecklistUpdated_disposable(t){const e=e=>{t(e)};return window.addEventListener("pf_one_checklist_updated",e),()=>{window.removeEventListener("pf_one_checklist_updated",e)}}attachAllChecklistsUpdated_disposable(t){const e=e=>{t(e.detail)};return window.addEventListener("pf_all_checklists_updated",e),()=>{window.removeEventListener("pf_all_checklists_updated",e)}}attachChecklistDismissed_disposable(t){const e=e=>{const n=e.detail||{};t(n.id,n.source)};return window.addEventListener("pf_checklist_dismissed",e),()=>{window.removeEventListener("pf_checklist_dismissed",e)}}attachChecklistEligibilityChanged_disposable(t){const e=e=>{const n=e.detail||{};t(n.id,n.eligibility)};return window.addEventListener("pfChecklistEligibilityChanged",e),()=>{window.removeEventListener("pfChecklistEligibilityChanged",e)}}};e.a=r},,function(t,e,n){"use strict";n.d(e,"c",(function(){return d})),n.d(e,"n",(function(){return c})),n.d(e,"k",(function(){return l})),n.d(e,"i",(function(){return u})),n.d(e,"h",(function(){return h})),n.d(e,"f",(function(){return p})),n.d(e,"g",(function(){return f})),n.d(e,"l",(function(){return g})),n.d(e,"m",(function(){return m})),n.d(e,"j",(function(){return b})),n.d(e,"a",(function(){return v})),n.d(e,"d",(function(){return w})),n.d(e,"b",(function(){return y})),n.d(e,"e",(function(){return C}));n(13);var r=n(7),i=n(4),o=n(47),s=n(42),a=n(73);function d(t,e){const n=v(t);return t.surveys.answers.find(t=>t.sId==n.id&&t.qId==e&&t.sesId==n.sesId)}function c(){const t=Object(r.b)(t=>{var e,n;return null!==(e=null===(n=t.surveys.descriptor)||void 0===n?void 0:n.items.filter(t=>null!=t.sesId))&&void 0!==e?e:[]}).filter(t=>{var e;return-1!==(null!==(e=t.inclLocs)&&void 0!==e?e:[]).indexOf(window.productFruits.language)}),[e,n]=Object(i.useState)([]),[d,c]=Object(i.useState)("loading"),l=t.filter(t=>-1!==e.indexOf(t.id)),u=Object(i.useRef)([]),h=Object(i.useCallback)(e=>{Object(a.a)(t.map(t=>t.id)),e.forEach(t=>{var e,r,i,o;u.current.push(Object(a.c)(t.id,async()=>{const e=await Object(s.a)([t]);n(n=>{let r=n.slice();return e.length>0?r.push(t.id):r=r.filter(e=>e!=t.id),r}),c("loaded")},null!==(e=null===(r=t.trgrOpts)||void 0===r?void 0:r.delMs)&&void 0!==e?e:0,!(null!==(i=t.urlFilter)&&void 0!==i&&null!==(o=i.urls)&&void 0!==o&&o.length)))})},[]);return Object(i.useEffect)(()=>()=>{u.current.forEach(t=>t())},[]),Object(i.useEffect)(()=>{const e=Object(s.b)(()=>{const e=Object(o.a)(t).visibleIds;let n=t.filter(t=>-1!==e.indexOf(t.id));h(n)});return()=>{e()}},[...t.map(t=>t.id),h]),Object(i.useEffect)(()=>{c("loading");const e=Object(o.a)(t,async({visibleIds:e,hiddenIds:n})=>{let r=t.filter(t=>-1!==e.indexOf(t.id));h(r)});return()=>{e()}},[...t.map(t=>t.id),h]),window.ProductFruitsDesigner?{filteredItems:t,filteringState:"loaded"}:{filteredItems:l,filteringState:d}}function l(t,e){const n=Object(r.b)(e=>{var n,r;return null===(n=e.surveys.descriptor)||void 0===n||null===(r=n.items)||void 0===r?void 0:r.filter(e=>e.id==t)[0]}),o=Object(r.b)(t=>t.surveys.fetchDetailsWithCaching),[s,a]=Object(i.useState)(!1);return Object(i.useEffect)(()=>{!1!==e&&(t?o([t]).finally(()=>a(!0)):a(!1))},[t,n,e]),[n,null!=n&&s]}function u(){var t;const e=Object(r.b)(v),n=Object(r.b)(t=>t.surveys.stepsManagement.currentStepId);return null===(t=y(e))||void 0===t?void 0:t.find(t=>t.id==n)}function h(){var t,e;const n=Object(r.b)(v),i=Object(r.b)(t=>t.surveys.stepsManagement.currentStepId);return null!==(t=null===(e=n.questions)||void 0===e?void 0:e.filter(t=>t.groupId==i))&&void 0!==t?t:[]}function p(){const t=h().filter(t=>t.required).map(t=>t.id),e=b(),n=Object(r.b)(t=>t.surveys.answers).filter(n=>n.sId==e.id&&t.includes(n.qId)&&n.sesId==e.sesId);return 0==t.length||t.length==n.length&&(n.length>0&&n.every(t=>null!=t.answer))}function f(){const t=u(),e=g(null==t?void 0:t.id);return!(null!=t&&t.required&&!e)}function g(t){const e=b(),n=Object(r.b)(n=>n.surveys.answers.find(n=>n.sId==e.id&&n.qId==t&&n.sesId==e.sesId));return null==n?void 0:n.answer}function m(t){const e=b(),n=Object(r.b)(n=>n.surveys.answers.find(n=>n.sId==e.id&&n.qId==t&&n.sesId==e.sesId));return null==n?void 0:n.addit}function b(){return Object(r.b)(v)}function v(t){var e,n,r;return null===(e=t.surveys.descriptor)||void 0===e||null===(n=e.items)||void 0===n||null===(r=n.filter(e=>e.id==t.surveys.renderedSurveyId))||void 0===r?void 0:r[0]}function w(t,e){return t.order>e.order?1:t.order<e.order?-1:0}function y(t){var e;return null!==(e="small"==t.layout?t.questions:t.groups)&&void 0!==e?e:[]}function C(t){const e=Object(r.b)(t=>t.surveys.answerQuestion),n=Object(r.b)(v),o="small"==(null==n?void 0:n.layout),[s,a]=Object(i.useState)(!1),d=Object(i.useRef)(),c=Object(r.b)(t=>t.surveys.stepsManagement.goToNextStep);Object(i.useEffect)(()=>()=>{clearTimeout(d.current)},[]);return{answerQuestion:Object(i.useCallback)((n,r,i)=>{o&&!t?(a(!0),e(n,r,i),d.current&&clearTimeout(d.current),d.current=setTimeout(()=>{c(),a(!1)},1100)):e(n,r,i)},[e,o,c,t]),answringInProgress:s}}},,,function(t,e,n){"use strict";n.d(e,"l",(function(){return c})),n.d(e,"k",(function(){return l})),n.d(e,"j",(function(){return u})),n.d(e,"c",(function(){return h})),n.d(e,"f",(function(){return p})),n.d(e,"i",(function(){return f})),n.d(e,"h",(function(){return g})),n.d(e,"g",(function(){return m})),n.d(e,"b",(function(){return b})),n.d(e,"m",(function(){return v})),n.d(e,"a",(function(){return w})),n.d(e,"e",(function(){return y})),n.d(e,"d",(function(){return k}));var r=n(10),i=n(5),o=n(60),s=n(2),a=n(21),d=n(14);function c(t,e,n){if(window.productFruitsUser&&!window.ProductFruitsDesigner){var o,s,a,d=r.a.getCurrentIdentity();k(Object(i.d)()+"/api/v1/stats/"+window.productFruits.code+"/tours/"+t+"/start",{username:window.productFruitsUser.username,stopOtherTours:e,ignoreRules:n,hmac:null!==(o=null==d||null===(s=d.user)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.hmac)&&void 0!==o?o:void 0})}}function l(t,e,n,o,s,d){if(window.productFruitsUser&&!window.ProductFruitsDesigner){var c,l,u,h=r.a.getCurrentIdentity();const p=O("tour_card_read_time_"+n);k(Object(i.d)()+"/api/v1/stats/"+window.productFruits.code+"/tours/"+t+"/cardhit",{username:window.productFruitsUser.username,cardId:n,isFinished:s,durationMs:p,hmac:null!==(c=null==h||null===(l=h.user)||void 0===l||null===(u=l.data)||void 0===u?void 0:u.hmac)&&void 0!==c?c:void 0}),d||(a.a.getInstance().trackEvent("tour_card_read",{tourId:t,tourName:e,cardId:n,cardName:o,durationMs:p,durationS:p/1e3}),s&&a.a.getInstance().trackEvent("tour_finished",{tourId:t,tourName:e,cardId:n,cardName:o}))}}function u(t,e,n,o){if(window.productFruitsUser&&!window.ProductFruitsDesigner){var s,d,c,l=r.a.getCurrentIdentity();const u=O("tour_card_read_time_"+n);C(Object(i.d)()+"/api/v1/stats/"+window.productFruits.code+"/tours/"+t+"/skip",{username:window.productFruitsUser.username,cardId:n,durationMs:u,hmac:null!==(s=null==l||null===(d=l.user)||void 0===d||null===(c=d.data)||void 0===c?void 0:c.hmac)&&void 0!==s?s:void 0}),a.a.getInstance().trackEvent("tour_card_read",{tourId:t,tourName:e,cardId:n,cardName:o,durationMs:u,durationS:u/1e3}),a.a.getInstance().trackEvent("tour_skipped",{tourId:t,tourName:e,cardId:n,cardName:o})}}function h(t,e){if(window.productFruitsUser&&!window.ProductFruitsDesigner){var n,o,s,a=r.a.getCurrentIdentity();C(Object(i.d)()+"/api/v1/stats/"+window.productFruits.code+"/tours/"+t+"/markas",{username:window.productFruitsUser.username,userState:e,hmac:null!==(n=null==a||null===(o=a.user)||void 0===o||null===(s=o.data)||void 0===s?void 0:s.hmac)&&void 0!==n?n:void 0})}}function p(t,e,n,r,i,o){var s;window.productFruitsUser&&!window.ProductFruitsDesigner&&(1===i&&a.a.getInstance().trackEvent("tour_started",{tourId:t,tourName:e,cardId:n,cardName:r,currentCardOrder:i,forced:o}),s="tour_card_read_time_"+n,performance.mark(s),a.a.getInstance().willTrackLater("tour_card_read"),a.a.getInstance().trackEvent("tour_card_loaded",{tourId:t,tourName:e,cardId:n,cardName:r,currentCardOrder:i,cardOrderWithName:i+" - "+r}))}function f(t,e,n){if(window.productFruitsUser&&!window.ProductFruitsDesigner){var o,s,d,c=r.a.getCurrentIdentity();C(Object(i.d)()+"/api/v1/stats/"+window.productFruits.code+"/changelogs/"+t+"/seen",{username:window.productFruitsUser.username,channelId:e,hmac:null!==(o=null==c||null===(s=c.user)||void 0===s||null===(d=s.data)||void 0===d?void 0:d.hmac)&&void 0!==o?o:void 0});try{let t={};Object.keys(n).map(e=>t["title_"+e]=n[e]),a.a.getInstance().trackEvent("changelog_loaded",t)}catch(t){}}}function g(t,e,n){if(window.productFruitsUser&&!window.ProductFruitsDesigner){var o,s,c,l=r.a.getCurrentIdentity();C(Object(i.d)()+"/api/v1/stats/"+window.productFruits.code+"/contexthelps/0/seen",{username:window.productFruitsUser.username,cardId:e,url:Object(d.a)(),containerId:t,hmac:null!==(o=null==l||null===(s=l.user)||void 0===s||null===(c=s.data)||void 0===c?void 0:c.hmac)&&void 0!==o?o:void 0}),a.a.getInstance().trackEvent("context_help_loaded",{containerId:t,cardId:e,cardName:n})}}function m(t,e,n){if(window.productFruitsUser&&!window.ProductFruitsDesigner){var o,s,c,l=r.a.getCurrentIdentity();C(Object(i.d)()+"/api/v1/stats/"+window.productFruits.code+"/contexthelps/0/dismiss",{username:window.productFruitsUser.username,cardId:e,url:Object(d.a)(),containerId:t,hmac:null!==(o=null==l||null===(s=l.user)||void 0===s||null===(c=s.data)||void 0===c?void 0:c.hmac)&&void 0!==o?o:void 0}),a.a.getInstance().trackEvent("context_help_dismissed",{containerId:t,cardId:e,cardName:n})}}function b(t,e,n,o,c,l,u,h,p,f,g){if(window.productFruitsUser&&!window.ProductFruitsDesigner){var m,b,v,w=r.a.getCurrentIdentity();k(Object(i.d)()+"/api/v1/stats/"+window.productFruits.code+"/mood",{username:window.productFruitsUser.username,tag:t,source:{dataId:e,cardId:c,url:Object(d.a)()},tourId:n,contextHelpId:u,rating:h,followUp:p,hmac:null!==(m=null==w||null===(b=w.user)||void 0===b||null===(v=b.data)||void 0===v?void 0:v.hmac)&&void 0!==m?m:void 0});const f={tourId:n,tourName:o,cardId:c,cardName:l,containerId:u,rating:h,tag:t};Object(s.a)("mood_evnt_txt")&&(f.followUp=p),a.a.getInstance().trackEvent("mood_gathered",f)}}function v(t){if(window.productFruitsUser&&!window.ProductFruitsDesigner){var e,n,o,s=r.a.getCurrentIdentity();k(Object(i.d)()+"/api/v1/stats/"+window.productFruits.code+"/checklists/batch-state",{username:window.productFruitsUser.username,groupId:r.a.groupId,itemsToUpdate:t,hmac:null!==(e=null==s||null===(n=s.user)||void 0===n||null===(o=n.data)||void 0===o?void 0:o.hmac)&&void 0!==e?e:void 0})}}function w(t,e){if(window.productFruitsUser&&!window.ProductFruitsDesigner){var n,o,s,a=r.a.getCurrentIdentity();k(Object(i.d)()+"/api/v1/stats/"+window.productFruits.code+"/checklists/dismiss",{username:window.productFruitsUser.username,groupId:r.a.groupId,checklistId:t,isGroup:e,hmac:null!==(n=null==a||null===(o=a.user)||void 0===o||null===(s=o.data)||void 0===s?void 0:s.hmac)&&void 0!==n?n:void 0})}}function y(t,e){if(window.productFruitsUser&&!window.ProductFruitsDesigner){var n,o,s,a=r.a.getCurrentIdentity();k(Object(i.d)()+"/api/v1/stats/"+window.productFruits.code+"/checklists/start",{username:window.productFruitsUser.username,groupId:r.a.groupId,checklistId:t,isGroup:e,hmac:null!==(n=null==a||null===(o=a.user)||void 0===o||null===(s=o.data)||void 0===s?void 0:s.hmac)&&void 0!==n?n:void 0})}}function C(t,e){return fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).catch(t=>{console.error("Product Fruits statistics endpoint failed",t)})}function k(t,e){navigator.brave||Object(o.b)()||Object(s.a)("nobeacon")?fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).catch(t=>{console.error("Product Fruits statistics endpoint failed",t)}):navigator.sendBeacon(t,JSON.stringify(e))}function O(t){try{performance.measure(t+"_measure",t);const e=performance.getEntriesByName(t+"_measure","measure")[0];return performance.clearMarks(t),performance.clearMeasures(t+"_measure"),e?Math.round(e.duration):0}catch(t){return 0}}},function(t,e,n){"use strict";n.d(e,"b",(function(){return m})),n.d(e,"a",(function(){return b}));var r=n(15),i=(n(32),n(39)),o=n(2),s=n(45),a=n(8),d=n(6),c=n(16),l=n(13),u=n(11),h=n(5),p=n(7),f=n(29);const g=new Map;function m(t,e){const n=function(t,e){const n=Object(d.d)();if(n&&n.rules)return n.rules.filter(n=>n.eId==t&&n.eTp==e)[0]}(t,e);return n?n.id:null}class b{constructor(t,e=null,n=null,r=null,i=null){if(this.rulesObject=t,this.rulesFound=!0,this.segmentId=e,this.rulesId=n,"be"==i&&(r||this.segmentId)){const t=Object(d.d)();if(t&&t.rules){const r=t.rules.filter(t=>t.eId==e&&"segment"==t.eTp)[0],i=t.rules.filter(t=>t.id==n)[0];r?(this.rulesId=r.id,this.rulesObject=r.rules):i?this.rulesObject=i.rules:this.rulesFound=!1}else this.rulesFound=!1}}shouldEvaluate(){return this.rulesObject&&this.rulesObject.rules&&0!==this.rulesObject.rules.length}passes(){if(!this.rulesFound)return!1;if(!this.rulesObject||!this.rulesObject.rules||0===this.rulesObject.rules.length)return!0;const t=this.rulesObject.condOp?this.rulesObject.condOp.toUpperCase():"";let e="AND"===t;for(let n of this.rulesObject.rules)e="AND"===t?e&&this.evalExpression(n.expression,n):e||this.evalExpression(n.expression,n);return e}async passesAsync(){if((t=this.rulesObject)&&t.rules&&t.rules.filter(t=>t.expression.prop.startsWith("event.")||t.expression.prop.startsWith("user.")||t.expression.prop.startsWith("segment.")).length>0)try{const t=await Object(s.c)().sendAndListenAsync(Object(s.b)("eval-rules",{rulesId:this.rulesId}),"rules-evaluated");if(this.rulesObject=t.evalRules,null!=this.rulesObject.evaluatedResult)return this.rulesObject.evaluatedResult}catch(t){return a.a.debug("Websocket events eval error",t),!1}var t;if(!this.rulesFound)return!1;if(!this.rulesObject||!this.rulesObject.rules||0===this.rulesObject.rules.length)return!0;const e=this.rulesObject.condOp?this.rulesObject.condOp.toUpperCase():"";let n="AND"===e;for(let t of this.rulesObject.rules){const r=await this.evalExpression(t.expression,t);n="AND"===e?n&&r:n||r}return n}evalExpression(t,e){if(e&&null!=e.evaluatedResult)return!!e.evaluatedResult;if(t.prop&&t.prop.startsWith("uiact"))return this.evalUiState(t);if("="===t.op){var n;const e=this.getValueWithMetadataFromProp(t.prop);return"boolean"==(null==e?void 0:e.type)?e.value==("true"==(null===(n=t.val)||void 0===n?void 0:n.toLowerCase())):this.getValueFromProp(t.prop,!0)==t.val}if("!="===t.op){var r;const e=this.getValueWithMetadataFromProp(t.prop);return"boolean"==(null==e?void 0:e.type)?e.value!=("true"==(null===(r=t.val)||void 0===r?void 0:r.toLowerCase())):this.getValueFromProp(t.prop,!0)!=t.val}if(">"===t.op)return this.getValueFromProp(t.prop,!0)>t.val;if("<"===t.op)return this.getValueFromProp(t.prop,!0)<t.val;if(">="===t.op)return this.getValueFromProp(t.prop,!0)>=t.val;if("<="===t.op)return this.getValueFromProp(t.prop,!0)<=t.val;if("contains"===t.op){let e=this.getValueFromProp(t.prop,!0);return!e&&!t.val||!(!e&&t.val)&&(!Object(o.a)("lgc_usr_ev_arr")&&Array.isArray(e)?e.filter(e=>e==t.val).length>0:-1!==e.toString().indexOf(t.val))}if("contains_not"===t.op){let e=this.getValueFromProp(t.prop,!0);return!(!e&&!t.val)&&(!(e||!t.val)||(!Object(o.a)("lgc_usr_ev_arr")&&Array.isArray(e)?0===e.filter(e=>e==t.val).length:-1===e.toString().indexOf(t.val)))}if("is_empty"===t.op){const e=this.getValueFromProp(t.prop,!0);return null==e||""===e||!!Array.isArray(e)&&0==e.length}if("is_empty_not"===t.op){const e=this.getValueFromProp(t.prop,!0);return null!=e&&""!==e&&(!Array.isArray(e)||e.length>0)}if("tour_state_valid"===t.op||"tour_state_invalid"===t.op)return this.evalTourOperatorExpression(t);if("d_ago"===t.op)return this.evalDAgo(t);if("d_ago_max"===t.op)return this.evalDAgoMax(t);if("segment_match"===t.op||"segment_match_not"==t.op)return this.evalSegment(t);if("chklst_state_valid"===t.op||"chklst_state_invalid"===t.op)return this.evalChecklistOperatorExpression(t);if("surv_is"===t.op||"surv_not"===t.op)return this.evalSurveyOperatorExpression(t);if("rgx"===t.op||"rgx_not"===t.op){let e=this.getValueFromProp(t.prop,!1);null==e&&(e="");try{const n=new RegExp(t.val,"m");return"rgx"==t.op?n.test(e):!n.test(e)}catch(t){return console.warn("PF eval - regex problem",t),!1}}}evalUiState(t){const e=(()=>{const e=Object(d.j)(t.data)||{},n={parametrized:e.url||""};if("uiact.elState"==t.prop){const r=Object(c.b)({query:e.sel});if(!Object(l.b)(n))return!1;if("exists"==t.op)return!!r;if("not_exists"==t.op)return!r}else if("uiact.inputVal"==t.prop){const r=Object(c.b)({query:e.sel});if(!r)return!1;const i=(r.value||"").toUpperCase(),o=(t.val||"").toUpperCase();if(!Object(l.b)(n))return!1;if("="==t.op)return o==i;if("!="==t.op)return o!=i;if("contains"==t.op)return-1!==i.indexOf(o);if("contains_not"==t.op)return-1===i.indexOf(o);if("empty"==t.op)return""==i;if("empty_not"==t.op)return""!=i}})();return e||this.attachChecker(t),e}attachChecker(t){if(g.has(t))return;const e=setInterval(()=>{this.evalUiState(t)&&(Object(u.b)("pf_ui_state_changed",t),g.get(t)())},1e3);g.set(t,()=>clearInterval(e))}evalDAgoMax(t){const e=this.getValueFromProp(t.prop);return!!e&&w(new Date(e),new Date)<=t.val}evalDAgo(t){const e=this.getValueFromProp(t.prop);return!!e&&w(new Date(e),new Date)>=t.val}evalSegment(t){if(Object(o.c)()){const e=new b(null,t.val,null,!1,"be");return"segment_match"==t.op?e.passesAsync():!e.passesAsync()}{if(!window.productFruits||!window.productFruits.segments)return!0;const e=window.productFruits.segments||[];if(0==e.length)return!1;const n=e.filter(e=>e.id==t.val)[0];if(!n||!n.rules)return!1;const r=new b(n.rules);return"segment_match"==t.op?r.passes():!r.passes()}}evalTourOperatorExpression(t){if(!window.productFruits||!window.productFruits.toursFactory)return!0;const e=window.productFruits.toursFactory.tours||[];if(0==e.length)return!1;const n=e.filter(e=>e.getId&&e.getId()==t.val)[0];if(!n)return!1;if("tour_state_valid"===t.op){if("tour.fin"===t.prop)return 1==n.userState;if("tour.skip"===t.prop)return Object(o.a)("lgc_tr_schd_skp")?2==n.userState:99==n.userState||2==n.userState;if("tour.fin_skip"===t.prop)return Object(o.a)("lgc_tr_schd_skp")?2==n.userState||1==n.userState:99==n.userState||2==n.userState||1==n.userState}else if("tour_state_invalid"===t.op){if("tour.fin"===t.prop)return 1!=n.userState;if("tour.skip"===t.prop)return(Object(o.a)("lgc_tr_schd_skp")||99!=n.userState)&&2!=n.userState;if("tour.fin_skip"===t.prop)return Object(o.a)("lgc_tr_schd_skp")?2!=n.userState&&1!=n.userState:99!=n.userState&&2!=n.userState&&1!=n.userState}return!1}evalChecklistOperatorExpression(t){if(!window.productFruits||!window.productFruits.checklistsFactory)return!0;const e=h.c.checklistsFactory.checklists||[];if(0==e.length)return!1;const n=e.filter(e=>e.getId&&e.getId()==t.val)[0];if(!n)return!1;if("chklst_state_valid"===t.op){if("chklst.compl"===t.prop)return 1==n.config.state&&n.isDismissed;if("chklst.dismis"===t.prop)return 1!=n.config.state&&n.isDismissed;if("chklst.compl_dismis"===t.prop)return 1==n.config.state||n.isDismissed;if("chklst.in_prgrs"===t.prop)return 1!=n.config.state&&!n.isDismissed}return!1}evalSurveyOperatorExpression(t){var e,n;const r=null===(e=p.a.getState().surveys.descriptor)||void 0===e||null===(n=e.items)||void 0===n?void 0:n.find(e=>e.id==t.val);if(!r)return!1;if("surv_is"==t.op){if("surv.fin"==t.prop)return r.usrSt==f.c.ClosedDone;if("surv.skip"==t.prop)return r.usrSt==f.c.ClosedNotDone}else if("surv_not"==t.op){if("surv.fin"==t.prop)return r.usrSt!=f.c.ClosedDone;if("surv.skip"==t.prop)return r.usrSt!=f.c.ClosedNotDone}return!1}getValueWithMetadataFromProp(t){let[e,n,...o]=t.split(".");if("user"===e){var s=window.productFruitsUser;if(!s)return;let t=null;return t=o.length>0?Object(r.b)([n,...o],s):s[n],{value:t,type:typeof t}}return"device"===e&&"type"===n?{value:Object(i.a)()}:"env"===e&&"language"===n&&window.productFruits?{value:window.productFruits.language}:void 0}getValueFromProp(t,e=!1){let[n,o,...s]=t.split(".");if("user"===n){var a=window.productFruitsUser;if(!a)return;let t=null;return t=s.length>0?Object(r.b)([o,...s],a):a[o],null!=t&&void 0!==t||(t=""),e?t:t.toString()}return"device"===n&&"type"===o?Object(i.a)():"env"===n&&"language"===o&&window.productFruits?window.productFruits.language:void 0}}function v(t){var e=new Date(t);return e.setMinutes(e.getMinutes()-e.getTimezoneOffset()),e}function w(t,e){return(v(e)-v(t))/864e5}},function(t,e,n){"use strict";let r,i,o;n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return o})),function(t){t[t.NewsFeed=1]="NewsFeed",t[t.Banner=2]="Banner",t[t.Popup=3]="Popup"}(r||(r={})),function(t){t[t.Unseen=1]="Unseen",t[t.Seen=2]="Seen"}(i||(i={})),function(t){t[t.Open=1]="Open",t[t.ClosedDone=2]="ClosedDone",t[t.ClosedNotDone=3]="ClosedNotDone"}(o||(o={}))},function(t,e,n){"use strict";function r(t){return 0===t?0:t||null}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(82),i=n(7);function o(t){i.a.setState(e=>Object(r.a)(e,t))}Object(r.b)(!1)},function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return o}));var r=n(5);function i(t,e=null,n={}){return fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),...n})}function o(t,e=null,n={}){return fetch(Object(r.d)()+t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),...n}).then(t=>t.json().catch(()=>{}))}},,,,,function(t,e,n){"use strict";function r(t){var e=document.createElement("template");return e.innerHTML=t,e.content.firstChild}n.d(e,"a",(function(){return r}))},,function(t,e,n){"use strict";function r(){return window.matchMedia("(max-width: 768px)").matches?"mobile":"desktop"}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(13);function i(t){return!t||!t.urls||0===t.urls.length||("exclude"===t.type?!t.urls.some(t=>Object(r.b)(t)):t.urls.some(t=>Object(r.b)(t)))}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(28);class i{constructor(t){this.segmentId=t,this.segmentRules=(window.productFruits&&window.productFruits.segments||[]).filter(e=>e.id==t)[0]}passes(){if(!this.segmentRules)return!0;return new r.a(this.segmentRules.rules).passes()}passesAsync(){if(!this.segmentRules)return!0;return new r.a(this.segmentRules.rules).passesAsync()}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return u})),n.d(e,"b",(function(){return p}));var r=n(11),i=n(2),o=n(28),s=n(41),a=n(22),d=n(45);let c;!function(t){t[t.TourStateChange=0]="TourStateChange",t[t.UserInfoChange=1]="UserInfoChange",t[t.EventTracked=2]="EventTracked",t[t.UIStateChange=3]="UIStateChange",t[t.ChecklistVisibilityChange=4]="ChecklistVisibilityChange",t[t.ServerSignal=5]="ServerSignal"}(c||(c={}));c.EventTracked,c.ServerSignal,c.UserInfoChange,c.TourStateChange;const l=new Map;async function u(t,e){const n=[];for(const a of t){var r;if(l.has(a.id)){l.get(a.id).evalRes&&n.push(a);continue}const t=null!==(r=a.segment)&&void 0!==r?r:a.segmentId;if(Object(i.c)()){const r=new o.a(a.rules,t,null!=e&&e.getRulesId?e.getRulesId(a):a.rulesId,null!=e&&e.hasRules?e.hasRules(a):null!=a.rulesId,"be"),i=await r.passesAsync();l.set(a.id,{evalRes:i,rules:r.rulesObject}),i&&n.push(a)}else{const e=new o.a(a.rules).passes()&&new s.a(t).passes();l.set(a.id,{evalRes:e,rules:a.rules}),e&&n.push(a)}}return n}const h={[c.ChecklistVisibilityChange]:"chklst.",[c.EventTracked]:"event.",[c.TourStateChange]:"tour.",[c.UIStateChange]:"uiact.",[c.UserInfoChange]:"user."};function p(t){const e=[];function n(e,n){const r=[];for(const[t,n]of l){var i,o;const s=null!==(i=null===(o=n.rules)||void 0===o?void 0:o.rules)&&void 0!==i?i:[];e==c.ServerSignal?s.some(t=>{var e,n,r,i;return(null===(e=t.expression)||void 0===e||null===(n=e.prop)||void 0===n?void 0:n.startsWith("user."))||(null===(r=t.expression)||void 0===r||null===(i=r.prop)||void 0===i?void 0:i.startsWith("event."))})&&r.push(t):s.some(t=>{var n,r;return null===(n=t.expression)||void 0===n||null===(r=n.prop)||void 0===r?void 0:r.startsWith(h[e])})&&r.push(t)}r.forEach(t=>l.delete(t)),t&&t(r)}return e.push(a.a.attachTourFinished_disposable(t=>n(c.TourStateChange,t))),e.push(a.a.attachTourSkipped_disposable(t=>n(c.TourStateChange,t))),e.push(a.a.attachUserChanged_disposable(()=>n(c.UserInfoChange))),e.push(Object(r.c)("pf_event_tracked",t=>n(c.EventTracked,t))),e.push(Object(r.c)("pf_ui_state_changed",()=>n(c.UIStateChange))),e.push(a.a.attachChecklistDismissed_disposable(()=>Object(i.a)("chk_rls")&&n(c.ChecklistVisibilityChange))),Object(i.c)()&&e.push(Object(d.c)().listenTo("rules-source-data-updated",()=>{n(c.ServerSignal)})),()=>{e.forEach(t=>t())}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n(9),i=n(3),o=n(8),s=n(1),a=n(2),d=n(19),c=n(55);class l{constructor(t,{targetElements:e,boundingIsTextContent:n,clickHandler:i,transparentBgColor:o,solidBgColor:s,highlighterColor:l,highlighterSpacing:u,highlighterThickness:h,zIndex:p=null,useAnimations:f=!0,useFrameBuffer:g=!0,containerized:m=!1,cssId:b=""}={}){const v=Object(d.a)();this.isContainerized=m;const w=r.a.getSubContainer("ubackdrop-a"+(m?"-"+v:""),"start"),y=r.a.getSubContainer("ubackdrop-b"+(m?"-"+v:""),"start");this.contA=w,this.contB=y;try{this.contA.setAttribute("data-session",c.b.id),this.contB.setAttribute("data-session",c.b.id)}catch(t){}g?0===w.children.length?this.backdropContainer=w:(y.innerHTML="",this.backdropContainer=y):this.backdropContainer=w,this.useAnimations=f,this.backdropParts={left:null,top:null,right:null,bottom:null,highlighter:null},this.backdropMarginGap=Number(null!=u?u:Object(a.a)("pos_pop")?2:5),this.targetElements=e,this.boundingIsTextContent=n,this.backdropJson=t||{},this.transparentBgColor=o||"#00000066",this.solidBgColor=s||"#fff",this.blockingBgColor="transparent",this.highlighterColor=l||"#283593",this.highlighterThickness=Number(null!=h?h:3)+"px",this.clickHandler=i,this.zIndex=p,this.backdropContainer&&this.backdropContainer.setAttribute("data-entity-id",b),this.backdropContainer.classList.toggle("backdrop-container"),this.applyToElement()}reinit(t){this.backdropJson=t||{},this.removeBackdrop(),this.applyToElement()}get type(){return this.backdropJson.type}applyToElement(){if(this.type){if("boxed"==this.type||"boxed_bg"==this.type||"boxed_noblock"===this.type){if(!this.targetElements)return void o.a.verbose("Target element is required");if(1===this.targetElements.length){var t=this.targetElements[0];if(!t)return;var e=t.getBoundingClientRect();if(Object(a.a)("iframes")&&(e=Object(s.f)(t)),this.boundingIsTextContent){var n=Array.from(t.childNodes).filter(t=>!!t.textContent&&t.textContent.trim&&""!=t.textContent.trim())[0];if(n&&n.nodeType===Node.TEXT_NODE){var r=document.createRange();r.selectNode(n),e=Object(a.a)("iframes")?Object(s.f)(t,r):r.getBoundingClientRect(),r.detach()}}this.appendBackdropBlockingParts(e),this.backdropParts.highlighter||(this.backdropParts.highlighter=this.createBd("highlighter",this.useAnimations,this.type,this.zIndex));var d=Object(a.a)("pos_pop")?this.backdropMarginGap:this.backdropMarginGap+2;this.backdropParts.highlighter.style.left=Object(i.a)(e.left-d+window.scrollX),this.backdropParts.highlighter.style.top=Object(i.a)(e.top-d+window.scrollY),this.backdropParts.highlighter.style.width=Object(i.a)(e.width+2*d),this.backdropParts.highlighter.style.height=Object(i.a)(e.height+2*d),"boxed_bg"==this.type?this.backdropParts.highlighter.style.boxShadow=`${this.highlighterColor} 0px 0px 0px ${this.highlighterThickness}, ${this.transparentBgColor} 0px 0px 0px 4000px`:"boxed_noblock"==this.type?(this.backdropParts.highlighter.style.boxShadow=`${this.highlighterColor} 0px 0px 0px ${this.highlighterThickness}`,this.backdropParts.left.style.pointerEvents="none",this.backdropParts.top.style.pointerEvents="none",this.backdropParts.right.style.pointerEvents="none",this.backdropParts.bottom.style.pointerEvents="none"):this.backdropParts.highlighter.style.boxShadow=`${this.highlighterColor} 0px 0px 0px ${this.highlighterThickness}`}else 0===this.targetElements.length?console.error("Boxed backdrop must be bound to at least one target element."):console.info("Multi element highlighting is not supported.")}else if("blocking"==this.type)this.createSingleBackdrop(this.blockingBgColor);else if("solid"==this.type)this.createSingleBackdrop(this.solidBgColor);else if("transparent"==this.type)this.createSingleBackdrop(this.transparentBgColor);else if("glow"==this.type||"glow_block"==this.type){const t=this.targetElements[0],e=Object(a.a)("iframes")?Object(s.f)(t):t.getBoundingClientRect();this.glowBackdrop&&this.glowBackdrop.isConnected||(this.glowBackdrop=Object(s.h)("div",{class:Object(s.i)("glow-highlighter"),style:{"--h-s":"1000px","--b-t":Object(i.a)(e.top),"--b-l":Object(i.a)(e.left),"--b-w":Object(i.a)(e.width),"--b-h":Object(i.a)(e.height)}})),this.glowBackdrop.style.setProperty("--h-s","1600px"),this.glowBackdrop.style.setProperty("--b-t",Object(i.a)(e.top)),this.glowBackdrop.style.setProperty("--b-l",Object(i.a)(e.left)),this.glowBackdrop.style.setProperty("--b-w",Object(i.a)(e.width)),this.glowBackdrop.style.setProperty("--b-h",Object(i.a)(e.height)),this.glowBackdrop.style.setProperty("--h-c",this.transparentBgColor),this.glowBackdrop.style.zIndex=this.zIndex?this.zIndex:10000010,"glow_block"==this.type&&this.appendBackdropBlockingParts(e),this.glowBackdrop.isConnected||(this.useAnimations?Object(s.b)(this.backdropContainer,this.glowBackdrop,{anim:"fadein-fast",removeAnimationClassAfterDuration:500}):this.backdropContainer.appendChild(this.glowBackdrop))}}else this.removeBackdrop()}appendBackdropBlockingParts(t){var e=document.documentElement.clientWidth,n=(document.documentElement.clientHeight,document.documentElement.scrollHeight);this.backdropParts.left||(this.backdropParts.left=this.createBd("left",!1,"",this.zIndex)),this.backdropParts.top||(this.backdropParts.top=this.createBd("top",!1,"",this.zIndex)),this.backdropParts.right||(this.backdropParts.right=this.createBd("right",!1,"",this.zIndex)),this.backdropParts.bottom||(this.backdropParts.bottom=this.createBd("bottom",!1,"",this.zIndex)),this.backdropParts.left.style.left=0,this.backdropParts.left.style.top=0,this.backdropParts.left.style.right=Object(i.a)(e-t.left+this.backdropMarginGap),this.backdropParts.left.style.pointerEvents=null,this.backdropParts.top.style.top=0,this.backdropParts.top.style.left=Object(i.a)(t.left-this.backdropMarginGap),this.backdropParts.top.style.right=Object(i.a)(e-t.left-t.width-this.backdropMarginGap),this.backdropParts.top.style.pointerEvents=null,this.backdropParts.right.style.top=0,this.backdropParts.right.style.right=0,this.backdropParts.right.style.left=Object(i.a)(t.left+t.width+this.backdropMarginGap),this.backdropParts.right.style.pointerEvents=null,this.backdropParts.bottom.style.top=Object(i.a)(t.bottom+this.backdropMarginGap),this.backdropParts.bottom.style.left=Object(i.a)(t.left-this.backdropMarginGap),this.backdropParts.bottom.style.right=Object(i.a)(e-t.left-t.width-this.backdropMarginGap),this.backdropParts.bottom.style.pointerEvents=null,this.backdropParts.left.style.height=Object(i.a)(n),this.backdropParts.top.style.height=Object(i.a)(t.top-this.backdropMarginGap),this.backdropParts.right.style.height=Object(i.a)(n),this.backdropParts.bottom.style.height=Object(i.a)(n-t.top-t.height-window.scrollY-this.backdropMarginGap)}createSingleBackdrop(t){this.backdropContainer.innerHTML="",this.backdropEl=document.createElement("div"),this.backdropEl.style.position="fixed",this.backdropEl.style.top=0,this.backdropEl.style.left=0,this.backdropEl.style.right=0,this.backdropEl.style.bottom=0,this.backdropEl.style.zIndex=this.zIndex?this.zIndex:10000010,this.backdropEl.className="productfruits--single-backdrop",this.backdropEl.style.backgroundColor=t,this.backdropEl.addEventListener("click",t=>{this.clickHandler&&this.clickHandler(t),t.preventDefault(),t.stopImmediatePropagation()}),this.backdropContainer.appendChild(this.backdropEl)}removeBackdrop(){this.backdropEl&&Object(s.d)(this.backdropEl,"fadeout-fast",this.useAnimations?500:0),this.backdropParts.highlighter&&Object(s.d)(this.backdropParts.highlighter,"fadeout-fast",this.useAnimations?500:0),this.backdropParts.left&&this.backdropParts.left.remove(),this.backdropParts.bottom&&this.backdropParts.bottom.remove(),this.backdropParts.top&&this.backdropParts.top.remove(),this.backdropParts.right&&this.backdropParts.right.remove(),this.backdropParts.left=this.backdropParts.bottom=this.backdropParts.top=this.backdropParts.right=this.backdropParts.highlighter=null,this.glowBackdrop&&(Object(s.d)(this.glowBackdrop,"fadeout-fast",this.useAnimations?500:0),this.glowBackdrop=null),this.backdropContainer&&this.backdropContainer.removeAttribute("data-entity-id")}dispose(){this.removeBackdrop(),this.isContainerized&&(this.contA.remove(),this.contB.remove())}setVisibility(t){this.backdropContainer.style.display=t?null:"none"}detachFromViewport(){this.backdropContainer.style.visibility="hidden",this.backdropContainer.style.pointerEvents="none"}reattachToViewport(){this.backdropContainer.style.visibility=null,this.backdropContainer.style.pointerEvents=null}createBd(t,e=!1,n="",r=null){var i=document.createElement("div");return i.dataset.backdropType=n,i.className="productfruits--quadbackdrop productfruits--backdrop-"+t,null!=r&&(i.style.zIndex=r),i.addEventListener("click",t=>{this.clickHandler&&this.clickHandler(t),t.stopImmediatePropagation(),t.preventDefault()}),Object(a.a)("bgdrp_stp")&&(i.addEventListener("mousedown",t=>{t.stopImmediatePropagation(),t.preventDefault()}),i.addEventListener("mouseup",t=>{t.stopImmediatePropagation(),t.preventDefault()}),i.addEventListener("pointerdown",t=>{t.stopImmediatePropagation(),t.preventDefault()}),i.addEventListener("pointerup",t=>{t.stopImmediatePropagation(),t.preventDefault()})),e?Object(s.b)(this.backdropContainer,i,{anim:"fadein-fast",removeAnimationClassAfterDuration:500}):this.backdropContainer.appendChild(i),i}}},function(t,e,n){"use strict";function r(t,e,n=1e3,r="parent"){!function t(e,n,r,i,o){if((new Date).getTime()-i>r)return;("width"==o?e.offsetWidth:e.offsetParent)?n():window.requestAnimationFrame(()=>{t(e,n,r,i,o)})}(t,e,n,(new Date).getTime(),r)}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";n.d(e,"c",(function(){return h})),n.d(e,"a",(function(){return p})),n.d(e,"b",(function(){return f}));var r=n(10),i=n(5),o=n(11),s=n(8),a=n(2),d=n(19);class c{constructor(){this.listeners=[],this.actionsQueue=[],this.lastReconnectAttempt=null,this.lastMessageSentTime=new Date,this.connectionAttemptCounter=0,this.messagesCounter=0,this.batchQueue=[],this.isWaitingForBatchSend=!1,Object(o.d)("beforeunload",()=>{this.disconnect()})}startPing(){this.pingInterval=setInterval(()=>{},6e4)}processQueuedMessages(){const t=[];this.actionsQueue.forEach(e=>{this.sendQueued(e)&&t.push(e)}),this.actionsQueue=this.actionsQueue.filter(e=>-1===t.indexOf(e))}connect(){if(this.ws&&1==this.ws.readyState)return;if(this.ws&&1!=this.ws.readyState&&this.ws.close(),this.isSessionDisposed)return;this.currentUsername==r.a.user.username&&this.currentGroup==r.a.groupId||(this.actionsQueue=[]),this.currentUsername=r.a.user.username,this.currentGroup=r.a.groupId;let t=Object(i.e)()+"?username="+encodeURIComponent(r.a.user.username)+"&projectCode="+encodeURIComponent(i.a.code);if(null!=r.a.groupId&&(t+="&groupId="+encodeURIComponent(r.a.groupId)),clearTimeout(this.reconnectionTimeout),g(this.lastReconnectAttempt)>60&&(this.reconnectionWaiting=!1,this.connectionAttemptCounter=0),this.connectionAttemptCounter>7&&g(this.lastReconnectAttempt)<7)return this.reconnectionWaiting=!0,void(this.reconnectionTimeout=setTimeout(()=>{this.reconnectionWaiting=!1,this.connect()},8e3));this.ws=new WebSocket(t),this.isConnected=!0,this.lastReconnectAttempt=new Date,this.connectionAttemptCounter++,this.ws.onopen=t=>{clearInterval(this.pingInterval),this.startPing(),this.processQueuedMessages()},this.ws.onclose=t=>{if(this.disconnectingFlag)return this.disconnectingFlag=!1,void(this.isConnected=!1);this.connect()},this.ws.onmessage=t=>{const e=JSON.parse(t.data),n=t=>{"pong"!=t.action&&("killswitch"==t.action&&(this.isSessionDisposed=!0,this.disconnect()),this.listeners.filter(e=>e.action==t.action).forEach(e=>e.callback(t)),t._id&&this.listeners.filter(e=>e.msgUuid==t._id).forEach(e=>e.callback(t)))};if(Object(a.a)("lgc_sckt_btc"))n(e);else if("batch-response"==e.action)for(const t of e.msgs)n(t);else n(e)}}sendQueued(t,e=!1){if(!this.ws)return!1;if(this.isSessionDisposed)return!1;if(1!=this.ws.readyState)return!e&&this.actionsQueue.push(t),!1;try{const e=2;if(this.messagesCounter>400&&g(this.lastMessageSentTime)<=e)return void console.error("PF - too many messages");if(g(this.lastMessageSentTime)<=e?this.messagesCounter++:this.messagesCounter=0,this.lastMessageSentTime=new Date,Object(a.a)("lgc_sckt_btc"))this.ws.send(JSON.stringify(t));else{if(this.batchQueue.push(t),this.isWaitingForBatchSend)return!0;const e=parseInt(localStorage.getItem("pf_pref_tmout_sockets"))||40;setTimeout(()=>{try{this.ws.send(JSON.stringify(f("batch",{msgs:this.batchQueue}))),this.batchQueue=[]}finally{this.isWaitingForBatchSend=!1}},e),this.isWaitingForBatchSend=!0}return!0}catch(n){return 1!=this.ws.readyState?(!e&&this.actionsQueue.push(t),this.connect()):s.a.error(n),!1}}sendAndListenAsync(t,e,n=1e4){return new Promise((e,r)=>{const i=Object(d.a)();let o=null;const s=this.listenToSpecific(i,t=>{clearTimeout(o),e(t),s()});t._id=i,this.sendQueued(t),o=setTimeout(()=>{s(),r("No response from PF server")},n)})}disconnect(){try{if(!this.ws||3==this.ws.readyState)return;this.disconnectingFlag=!0,this.isConnected=!1,this.ws.close()}catch(t){}}listenTo(t,e){const n={action:t,callback:e};return this.listeners.push(n),()=>{this.listeners=this.listeners.filter(t=>t!=n)}}listenToSpecific(t,e){const n={msgUuid:t,callback:e};return this.listeners.push(n),()=>{this.listeners=this.listeners.filter(t=>t!=n)}}get isSessionDisposed(){return"1"==sessionStorage.getItem(m)}set isSessionDisposed(t){t?sessionStorage.getItem(m,"1"):sessionStorage.removeItem(m)}}const l=new Map;function u(){return r.a.user.username+r.a.groupId}function h(){const t=u(),e=l.get(t);if(e)return e;const n=new c;return n.connect(),l.set(t,n),n}function p(){const t=u(),e=l.get(t);e&&(e.disconnect(),l.delete(t))}function f(t,e){return{action:t,username:r.a.user.username,projectCode:i.a.code,...e}}function g(t){return(new Date-t)/1e3}const m="pf_sockets_session_disposed"},function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return o}));var r=n(3);function i(t,e,n,i={}){const o=i.dependentElementRect||{height:t.offsetHeight,width:t.offsetWidth},s=o.height/2,a=o.width/2,d=e.height/2,c=e.width/2,l=void 0===i.compensation?10:i.compensation,u=void 0===i.gap?20:i.gap;i.invertedY&&("orb"==n?n="ort":"ort"==n?n="orb":"olb"==n?n="olt":"olt"==n&&(n="olb"));let h="unknown";return"or"==n?(t.style.left=Object(r.a)(e.left+e.width+u),t.style.top=Object(r.a)(e.top+d-s+window.scrollY),h="left"):"ol"==n?(t.style.left=Object(r.a)(e.left-o.width-u),t.style.top=Object(r.a)(e.top+d-s+window.scrollY),h="right"):"ot"==n?(t.style.left=Object(r.a)(e.left+c-a),t.style.top=Object(r.a)(e.top-o.height-u+window.scrollY),h="bottom"):"ob"==n?(t.style.left=Object(r.a)(e.left+c-a),t.style.top=Object(r.a)(e.top+e.height+u+window.scrollY),h="top"):"obl"==n?(t.style.left=Object(r.a)(e.left+e.width-o.width+l),t.style.top=Object(r.a)(e.top+e.height+u+window.scrollY),h="top"):"obr"==n?(t.style.left=Object(r.a)(e.left-l),t.style.top=Object(r.a)(e.top+e.height+u+window.scrollY),h="top"):"olb"==n?(t.style.left=Object(r.a)(e.left-o.width-u),t.style.top=Object(r.a)(e.top-l+window.scrollY),h="right"):"olt"==n?(t.style.left=Object(r.a)(e.left-o.width-u),t.style.top=Object(r.a)(e.top+e.height-o.height+l+window.scrollY),h="right"):"otr"==n?(t.style.left=Object(r.a)(e.left-l),t.style.top=Object(r.a)(e.top-o.height-u+window.scrollY),h="bottom"):"otl"==n?(t.style.left=Object(r.a)(e.left+e.width-o.width+l),t.style.top=Object(r.a)(e.top-o.height-u+window.scrollY),h="bottom"):"orb"==n?(t.style.left=Object(r.a)(e.left+e.width+u),t.style.top=Object(r.a)(e.top-l+window.scrollY),h="left"):"ort"==n&&(t.style.left=Object(r.a)(e.left+e.width+u),t.style.top=Object(r.a)(e.top+e.height-o.height+l+window.scrollY),h="left"),h}function o(t,e,n,i={}){const o=window.scrollY,s=window.scrollX,a=(i.dependentElementDesiredWidth||28)/2,d=e.height/2,c=e.width/2;"lt"==n?(t.style.left=Object(r.a)(e.left+s-a),t.style.top=Object(r.a)(e.top+o-a)):"l"==n?(t.style.left=Object(r.a)(e.left+s-a),t.style.top=Object(r.a)(e.top+d+o-a)):"lb"==n?(t.style.left=Object(r.a)(e.left+s-a),t.style.top=Object(r.a)(e.top+e.height+o-a)):"rt"==n?(t.style.left=Object(r.a)(e.left+e.width+s-a),t.style.top=Object(r.a)(e.top+o-a)):"r"==n?(t.style.left=Object(r.a)(e.left+e.width+s-a),t.style.top=Object(r.a)(e.top+d+o-a)):"rb"==n?(t.style.left=Object(r.a)(e.left+e.width+s-a),t.style.top=Object(r.a)(e.top+e.height+o-a)):"t"==n?(t.style.left=Object(r.a)(e.left+c+s-a),t.style.top=Object(r.a)(e.top+o-a)):"b"==n?(t.style.left=Object(r.a)(e.left+c+s-a),t.style.top=Object(r.a)(e.top+e.height+o-a)):"c"==n&&(t.style.left=Object(r.a)(e.left+c+s-a),t.style.top=Object(r.a)(e.top+d+o-a))}},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(40),i=n(11);let o=[];function s(t){const e=t?[t]:o;for(const t of e){const e=[],n=[];if(t.items.forEach(t=>{Object(r.a)(t.urlFilter)?e.push(t.id):n.push(t.id)}),!t.callback)return{visibleIds:e,hiddenIds:n};t.callback({visibleIds:e,hiddenIds:n})}}function a(t,e){const n={items:t,callback:e};return e?(o.push(n),s(n),()=>{o=o.filter(t=>t!=n)}):s(n)}Object(i.d)("pfruits_locationchange",()=>{s()})},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(16),i=n(2);function o(t,e,{parent:n,recursive:o,onlyOnce:s=!0,includeDisplay:a=!0,showDelayMs:d}={}){let c=null,l=null,u=!1,h=null,p=setTimeout(()=>{const a=Object(i.a)("iframes")?Object(r.b)(t):Object(r.a)(t);a?e([a]):(c=new MutationObserver((function(n){l=setTimeout(()=>{if(l&&clearTimeout(l),u)return;const n=Object(i.a)("iframes")?Object(r.b)(t):Object(r.a)(t);let o=[];if(n&&o.push(n),o.length>0){this.disconnect(),window.requestAnimationFrame((function(){setTimeout((function(){u||(u=!0,e(o),s&&(c.disconnect(),Object(i.a)("iframes")&&h&&clearInterval(h)))}),100)}))}},d||0)})),c.observe(n||document,{subtree:!o,childList:!0}),Object(i.a)("iframes")&&(h=setInterval(()=>{const n=Object(r.b)(t);n&&(clearInterval(h),h=null,window.requestAnimationFrame(()=>{u||(e([n]),u=!0)}),s&&c&&c.disconnect())},1e3)))},d||0);return()=>{c&&c.disconnect(),p&&clearTimeout(p),l&&clearTimeout(l),h&&clearInterval(h)}}},function(t,e,n){"use strict";function r(t,e,n){try{t.setAttribute(e,n)}catch(t){console.info("PF - elementSetAttributeSafe problem",t)}}n.d(e,"a",(function(){return r}))},,,function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"d",(function(){return s})),n.d(e,"c",(function(){return a})),n.d(e,"b",(function(){return d}));var r=n(1),i=n(6);function o(t,e){var n,r;n=t,r=e.cardBackgroundColor,n.style.backgroundColor=r,r&&-1!==r.indexOf("gradient")?n.style.backgroundImage=r:n.style.backgroundImage=null;var o=t.getElementsByClassName("productfruits--card-header")[0],s=t.getElementsByClassName("productfruits--card-body")[0],a=t.getElementsByClassName("productfruits--card-footer")[0],d=t.getElementsByClassName("productfruits--card-arrow")[0];o.style.color=e.cardTextColor,a.style.color=e.cardTextColor,s.style.color=e.cardTextColor,d&&d.style.setProperty("--arrow-bg-color",e.cardBackgroundColor||"white"),Object(i.f)(["v2","v3"])?e.dividersColor&&(o.style.setProperty("--border-color",e.dividersColor),a.style.setProperty("--border-color",e.dividersColor)):(o.style.borderBottomColor=e.dividersColor,a.style.borderTopColor=e.dividersColor);var c=t.getElementsByClassName("productfruits--card-footer-next-button")[0],l=t.getElementsByClassName("productfruits--card-footer-back-button")[0],u=t.getElementsByClassName("productfruits--card-footer-skip-button")[0],h=t.getElementsByClassName("productfruits--card-footer-close-button")[0],p=t.getElementsByClassName("productfruits--card-footer-dismiss-button")[0];c&&(c.style.backgroundColor=e.nextButtonBackgroundColor,c.style.color=e.nextButtonTextColor),l&&(l.style.backgroundColor=e.nextButtonBackgroundColor,l.style.color=e.nextButtonTextColor),u&&(u.style.backgroundColor=e.skipButtonBackgroundColor,u.style.color=e.skipButtonTextColor),h&&(h.style.backgroundColor=e.skipButtonBackgroundColor,h.style.color=e.skipButtonTextColor),p&&(p.style.backgroundColor=e.dismissButtonBackgroundColor,p.style.color=e.dismissButtonTextColor),Array.from(t.getElementsByClassName("productfruits--btn-card-content")).forEach(t=>{t.hasAttribute("data-pf-skip-design")||(t.style.backgroundColor=e.nextButtonBackgroundColor,t.style.color=e.nextButtonTextColor)});var f=t.getElementsByClassName("productfruits--card-footer-steps-counter")[0];f&&(f.style.color=e.counterTextColor),t.getElementsByClassName("productfruits--branding")[0].style.color=e.cardTextColor}function s(t,e){e||(e={}),t.style.position="fixed",t.style.right=0,t.style.bottom=e.mainButtonBotomYOffset?e.mainButtonBotomYOffset:"200px",e.mainButtonTextColor&&(t.style.color=e.mainButtonTextColor),e.mainButtonBackgroundColor&&(t.style.backgroundColor=e.mainButtonBackgroundColor)}function a(t,e){if(e||(e={}),e.popupsBackgroundColor&&(t.style.background=e.popupsBackgroundColor),e.popupsTextColor&&(t.style.color=e.popupsTextColor,Object(i.f)(["v2","v3"]))){const n=t.getElementsByClassName(Object(r.i)("feedback-popup-sendfeedback"))[0];n&&(n.style.color=e.popupsTextColor)}if(e.popupsButtonBackgroundColor)if(Object(i.f)(["v2","v3"])){for(let n of t.querySelectorAll("button:not(.productfruits--feedback-popup-close):not(.productfruits--feedback-popup-attach-btn)"))n.style.background=e.popupsButtonBackgroundColor;for(let n of t.querySelectorAll(".productfruits--feedback-popup-attach-btn")){const t=n.querySelector(".productfruits--feedback-popup-attach-btn-icon");t&&(t.style.background=e.popupsButtonBackgroundColor)}for(let n of t.querySelectorAll(".productfruits--feedback-popup-close-std"))n.style.background=e.popupsButtonBackgroundColor}else{for(let n of t.querySelectorAll("button:not(.productfruits--feedback-popup-close)"))n.style.background=e.popupsButtonBackgroundColor;for(let n of t.querySelectorAll(".productfruits--feedback-popup-close-std"))n.style.background=e.popupsButtonBackgroundColor}if(e.popupsButtonTextColor){for(let n of t.querySelectorAll("button:not(.productfruits--feedback-popup-close)")){n.style.color=e.popupsButtonTextColor;for(let t of n.querySelectorAll(".productfruits--icon"))t.style.backgroundColor=e.popupsButtonTextColor}for(let n of t.querySelectorAll(".productfruits--feedback-popup-close-std"))n.style.color=e.popupsButtonTextColor}if(e.textInputsBackgroundColor)for(let n of t.querySelectorAll("textarea, input[type=text]"))n.style.background=e.textInputsBackgroundColor;if(e.textInputsTextColor)for(let n of t.querySelectorAll("textarea, input[type=text]"))n.style.color=e.textInputsTextColor;const n=t.getElementsByClassName("productfruits--feedback-popup-header")[0];if(n&&(n.style.background=e.popupsHeaderBackgroundColor,n.style.color=e.popupsHeaderTextColor,Object(i.f)(["v2","v3"]))){const n=t.getElementsByClassName("productfruits--feedback-popup-close")[0];n&&(n.style.backgroundColor=e.popupsHeaderTextColor)}}function d(t,e){if(e)if(t.firstElementChild&&"svg"==t.firstElementChild.tagName.toLowerCase()){for(const n of t.querySelectorAll(".hotspot-colored-element-stroke"))n.style.stroke=e.mainIconBeaconColor;for(const n of t.querySelectorAll(".hotspot-colored-element-fill"))n.style.fill=e.mainIconBeaconColor}else{const n=t.querySelector(".productfruits--context-help-help-icon-content"),r=t.querySelector(".productfruits--context-help-help-icon-content-ico");n&&(n.style.background=e.mainIconBackgroundColor),r&&(r.style.backgroundColor=e.mainIconColor)}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return p})),n.d(e,"b",(function(){return f})),n.d(e,"c",(function(){return g}));var r=n(4),i=n(10),o=n(42),s=n(47),a=n(5),d=n(32),c=n(67),l=n(29),u=n(7),h=n(33);const p=(t,e)=>{var n,r;return{descriptor:null!==(n=null===(r=h.a.config)||void 0===r?void 0:r.announcementsV2)&&void 0!==n?n:{items:[]},fetchedAnnouncementIds:[],renderedPopup:{inPrimaryLayerIds:[]},fetchDetailsWithCaching:async n=>{var r,o,s,c;const l=e().announcements.fetchedAnnouncementIds,u=n.filter(t=>-1===l.indexOf(t));var h=i.a.getCurrentIdentity();const p={ids:u,hmac:null!==(r=null==h||null===(o=h.user)||void 0===o||null===(s=o.data)||void 0===s?void 0:s.hmac)&&void 0!==r?r:void 0,username:null==h||null===(c=h.user)||void 0===c?void 0:c.username};return u.length>0?(l.push(...n),Object(d.a)(`/api/v2/stats/${a.a.code}/announcements/public-batch?fields=hdcnts&fields=cnts`,p).then(e=>{const n=e.map(t=>t.id);t(t=>{var r,i;return{...t,announcements:{...t.announcements,descriptor:{items:null===(r=t.announcements.descriptor)||void 0===r||null===(i=r.items)||void 0===i?void 0:i.map(t=>{const r=e.filter(e=>e.id==t.id)[0];return-1!==n.indexOf(t.id)?{...t,cnts:null==r?void 0:r.cnts,hdCnts:null==r?void 0:r.hdCnts,pAct:null==r?void 0:r.pAct,sAct:null==r?void 0:r.sAct,title:null==r?void 0:r.title}:{...t}})}}}})})):new Promise(t=>t())},markAsSeen:(n,r)=>{const o=Array.isArray(n)?n:[n];var s=i.a.getCurrentIdentity();if(r){var c;const l=null===(c=e().announcements.descriptor)||void 0===c?void 0:c.items.filter(t=>-1!==o.indexOf(t.id)&&!t.aTr).map(t=>t.id);var u,h,p;if(l.length>0)Object(d.a)(`/api/v1/stats/${a.a.code}/announcements/${n}/seen`,{username:i.a.user.username,ids:l,shallow:r,hmac:null!==(u=null==s||null===(h=s.user)||void 0===h||null===(p=h.data)||void 0===p?void 0:p.hmac)&&void 0!==u?u:void 0}),t(t=>({...t,announcements:{...t.announcements,descriptor:{...t.announcements.descriptor,items:[...t.announcements.descriptor.items.map(t=>t.id==n?{...t,aTr:!0}:{...t})]}}}))}else{var f,g,m,b;const c=null===(f=e().announcements.descriptor)||void 0===f?void 0:f.items.filter(t=>-1!==o.indexOf(t.id)&&t.userState!=l.b.Seen).map(t=>t.id);Object(d.a)(`/api/v1/stats/${a.a.code}/announcements/${n}/seen`,{username:i.a.user.username,ids:c,shallow:r,hmac:null!==(g=null==s||null===(m=s.user)||void 0===m||null===(b=m.data)||void 0===b?void 0:b.hmac)&&void 0!==g?g:void 0}),t(t=>({...t,announcements:{...t.announcements,descriptor:{...t.announcements.descriptor,items:[...t.announcements.descriptor.items.map(t=>t.id==n?{...t,userState:l.b.Seen}:{...t})]}}}))}},markListAsChecked:()=>{},setRenderedPopup:(e,n)=>{const r=Array.isArray(e)?e:[e];t("primary"==n?t=>({...t,announcements:{...t.announcements,renderedPopup:{...t.announcements.renderedPopup,inPrimaryLayerIds:[...r,...t.announcements.renderedPopup.inPrimaryLayerIds]}}}):t=>({...t,announcements:{...t.announcements,renderedPopup:{...t.announcements.renderedPopup,inSecondaryLayerId:r[0]}}}))},dismissRenderedPopup:(e,n)=>{const r=Array.isArray(e)?e:[e];t("primary"==n?t=>({...t,announcements:{...t.announcements,renderedPopup:{...t.announcements.renderedPopup,inPrimaryLayerIds:[...t.announcements.renderedPopup.inPrimaryLayerIds.filter(t=>-1===r.indexOf(t))]}}}):t=>({...t,announcements:{...t.announcements,renderedPopup:{...t.announcements.renderedPopup,inSecondaryLayerId:null}}}))},setRenderedBannerId:e=>{t(t=>({...t,announcements:{...t.announcements,renderedBannerId:e}})),c.a.setObject("rendered_banner",e)}}};function f(t,e){const n=Object(u.b)(e=>{var n,r,i;return null!==(n=null===(r=e.announcements.descriptor)||void 0===r||null===(i=r.items)||void 0===i?void 0:i.filter(e=>e.type==t))&&void 0!==n?n:[]}),i=Object(u.b)(n=>{var r,i,o;return null!==(r=null===(i=n.announcements.descriptor)||void 0===i||null===(o=i.items)||void 0===o?void 0:o.filter(n=>{var r;return n.type==t&&-1!==(null!==(r=n.lngs)&&void 0!==r?r:[]).indexOf(window.productFruits.language)&&(null==e||!e.onlyUnseen||n.userState==l.b.Unseen)&&(null==e||!e.additionalFilter||(null==e?void 0:e.additionalFilter(n)))}).slice().sort((t,n)=>"newTop"==(null==e?void 0:e.order)?t.at>n.at?-1:n.at<t.at?1:0:"oldTop"==(null==e?void 0:e.order)?t.at<n.at?-1:n.at>t.at?1:0:0))&&void 0!==r?r:[]}),[a,d]=Object(r.useState)([]),[c,h]=Object(r.useState)("loading"),p=i.filter(t=>-1!==a.indexOf(t.id)).slice(0,null==e?void 0:e.maxCount);return Object(r.useEffect)(()=>{const t=Object(o.b)(()=>{const t=Object(s.a)(n).visibleIds;Object(o.a)(n.filter(e=>-1!==t.indexOf(e.id))).then(t=>{d(t.map(t=>t.id)),h("loaded")})});return()=>{t()}},[...n.map(t=>t.id)]),Object(r.useEffect)(()=>{h("loading");const t=Object(s.a)(i,async({visibleIds:t,hiddenIds:e})=>{const n=await Object(o.a)(i.filter(e=>-1!==t.indexOf(e.id)));d(n.map(t=>t.id)),h("loaded")});return()=>{t()}},[t,...i.map(t=>t.id)]),{filteredItems:p,filteringState:c}}function g(t,e){const n=Object(u.b)(e=>{var n,r;return null===(n=e.announcements.descriptor)||void 0===n||null===(r=n.items)||void 0===r?void 0:r.filter(e=>e.id==t)[0]}),i=Object(u.b)(t=>t.announcements.fetchDetailsWithCaching),[o,s]=Object(r.useState)(!1);return Object(r.useEffect)(()=>{!1!==e&&(t?i([t]).finally(()=>s(!0)):s(!1))},[t,n,e]),[n,null!=n&&o]}},function(t,e,n){"use strict";var r=n(3),i=n(56),o=n(46),s=n(1),a=n(39),d=n(57),c=n(2),l=n(30),u=n(6),h=n(26),p=n(35);function f(t){switch(t){case"ol":return"left";case"ot":return"top";case"ob":return"bottom";case"or":return"right";case"otr":return"top-start";case"obr":return"bottom-start";case"otl":return"top-end";case"obl":return"bottom-end";case"olt":return"left-end";case"olb":return"left-start";case"ort":return"right-end";case"orb":return"right-start"}return"bottom-start"}e.a=class{constructor(t,e,n,r=null,o={}){this.targetElement=t,this.cardElement=e,this.targetPositionElement=r,this.config=o||{},this.positionConfig=this.config.positionConfig||{},this.scrollMargin=this.positionConfig.scrollMargin,this.cardHolder=this.config.cardHolder,this.motionSenzor=new i.a(this.targetElement,()=>{this.applyPosition(!0),n&&n()}),!1!==this.config.useTimer&&(window.__pfTimers||(window.__pfTimers=0),window.__pfTimers++,this.positionTimer=setInterval(()=>{this.applyPosition(!0),n&&n()},700))}getFinalPositionIdent(){return this.positionConfig.position?this.positionConfig.position:"a"}updateCardElement(t,e){const n=this.cardElement.querySelector(t);n&&e(n)}applyPosition(t){if(this.isDisposed)return;const e=this.cardElement.getElementsByClassName(Object(s.i)("card-arrow"))[0];Object(c.a)("crd_rsp_w")?(this.cardElement.style.width="var(--card-responsive-width)",this.cardElement.style.maxWidth=this.positionConfig.width||"340px"):this.cardElement.style.width=this.positionConfig.width,this.updateCardElement(".productfruits--card-body",t=>{t.style.minHeight=this.positionConfig.minHeight}),this.positionConfig.maxHeight&&this.cardElement.classList.contains(Object(s.i)("card"))&&(this.cardElement.style.maxHeight=this.positionConfig.maxHeight,this.cardElement.style.display="flex",this.cardElement.style.flexDirection="column",this.cardElement.style.overflow="hidden",this.updateCardElement(".productfruits--card-body",t=>{t.style.overflowY="auto"}));const n=this.targetPositionElement?this.targetPositionElement:this.targetElement;let i=n.getBoundingClientRect(),g=n;if(this.config.boundingIsTextContent){var m=Array.from(n.childNodes).filter(t=>!!t.textContent&&t.textContent.trim&&""!=t.textContent.trim())[0];if(m&&m.nodeType===Node.TEXT_NODE){var b=document.createRange();b.selectNode(m),i=b.getBoundingClientRect(),b.detach(),g=b}}n.isConnected&&!Object(u.g)(i)&&(this.lastKnownTargetElementRect=i),!n.isConnected&&Object(u.g)(i)&&(i=this.lastKnownTargetElementRect?this.lastKnownTargetElementRect:new DOMRect);let v="unknown";const w=()=>{const n=[Object(h.d)(10),Object(h.f)(Object(c.a)("crd_rsp_w")?{crossAxis:!0}:{}),Object(h.c)({fallbackPlacements:["bottom-start","bottom","bottom-end","right-start","right","right-end","top-start","top","top-end","left-start","left","left-end"],padding:10})];this.positionConfig.arrowToTarget&&n.push(Object(h.a)({element:e,padding:12})),Object(p.b)(g,this.cardElement,{middleware:n,placement:f(this.getFinalPositionIdent())}).then(n=>{if(this.cardElement.style.left=Object(r.a)(n.x),this.cardElement.style.top=Object(r.a)(n.y),n.middlewareData&&n.middlewareData.arrow){const t=10,i=n.middlewareData.arrow,o=({left:t,right:n,top:r,bottom:i})=>{e.style.left=Object(l.a)(t),e.style.right=Object(l.a)(n),e.style.top=Object(l.a)(r),e.style.bottom=Object(l.a)(i)};let a=n.placement?n.placement.split("-")[0]:"";"right"==a?(a="left",o({left:Object(r.a)(-t),top:Object(r.a)(i.y)})):"left"==a?(a="right",o({right:Object(r.a)(-t),top:Object(r.a)(i.y)})):"top"==a?(a="bottom",o({bottom:Object(r.a)(-t),left:Object(r.a)(i.x)})):"bottom"==a&&(a="top",o({top:Object(r.a)(-t),left:Object(r.a)(i.x)}));const d=Object(s.i)("card-arrow-"+a);e.classList.contains(d)||(Object(s.j)(e,Object(s.i)("card-arrow-")),e.classList.add(d))}else Object(s.j)(e,Object(s.i)("card-arrow-"));!0!==t&&setTimeout(()=>{Object(s.l)(this.targetElement,this.scrollMargin)},200)})};if("a"==this.getFinalPositionIdent()){const e={height:this.cardElement.offsetHeight,width:this.cardElement.offsetWidth};if(Object(c.a)("pos_pop")||"mobile"!=Object(a.a)())if(Object(c.a)("old_positioning"))window.innerHeight/2>i.top?this.cardElement.style.top=Object(r.a)(i.top+i.height+20+window.scrollY):this.cardElement.style.top=Object(r.a)(i.top-e.height-20+window.scrollY),window.innerWidth/2>i.left?this.cardElement.style.left=Object(r.a)(i.left+window.scrollX-10):this.cardElement.style.left=Object(r.a)(i.left+i.width-e.width+window.scrollX+10),!0!==t&&setTimeout(()=>{Object(s.l)(this.targetElement,this.scrollMargin)},200);else if(Object(c.a)("pos_pop"))w();else{const n=.22*window.innerWidth,o=.78*window.innerHeight,a=i.right<n,d=i.left>o;function y(){const t=window.scrollY+i.top+e.height-(window.scrollY+window.innerHeight);return t>0?window.scrollY+i.top-t-10:window.scrollY+i.top-10}a?(this.cardElement.style.left=Object(r.a)(i.right+window.scrollX+20),this.cardElement.style.top=Object(r.a)(y()),v="left"):d?(this.cardElement.style.left=Object(r.a)(i.left-e.width-20-window.scrollX),this.cardElement.style.top=Object(r.a)(y()),v="right"):(window.innerWidth/2>i.left?this.cardElement.style.left=Object(r.a)(i.left+window.scrollX-10):this.cardElement.style.left=Object(r.a)(i.left+i.width-e.width+window.scrollX+10),window.innerHeight/2>i.top?(this.cardElement.style.top=Object(r.a)(i.top+i.height+20+window.scrollY),v="top"):(this.cardElement.style.top=Object(r.a)(i.top-e.height-20+window.scrollY),v="bottom")),!0!==t&&setTimeout(()=>{Object(s.l)(this.targetElement,this.scrollMargin)},200)}else window.innerHeight/2>i.top?this.cardElement.style.top=Object(r.a)(i.top+i.height+20+window.scrollY):this.cardElement.style.top=Object(r.a)(i.top-e.height-20+window.scrollY),this.cardElement.style.left=Object(r.a)(window.innerWidth/2-e.width/2+window.scrollX),!0!==t&&setTimeout(()=>{Object(s.l)(this.targetElement,this.scrollMargin)},200)}else if(this.getFinalPositionIdent().startsWith("_det")){this.cardHolder.style.position="fixed",this.cardElement.classList.add("productfruits--card-dialog-style"),this.cardElement.style.top=null,this.cardElement.style.left=null,this.cardElement.style.right=null,this.cardElement.style.bottom=null;const n=Object.assign({},this.positionConfig);n.position=n.position.replace("_det-",""),Object(d.a)(this.cardHolder,this.cardElement,n),Object(s.j)(e,Object(s.i)("card-arrow-")),!0!==t&&this.targetElement&&setTimeout(()=>{Object(s.l)(this.targetElement,this.scrollMargin)},200)}else Object(c.a)("pos_pop")?w():(this.cardElement.style.right=null,v=Object(o.b)(this.cardElement,i,this.positionConfig.position,{cardGap:20})),!0!==t&&setTimeout(()=>{Object(s.l)(this.targetElement,this.scrollMargin)},200);if(Object(c.a)("iframes")&&this.targetElement.ownerDocument!==document&&!this.targetPositionElement){const t=Object(s.g)(this.targetElement.ownerDocument.defaultView.frameElement);if(this.cardElement.style.top){const e=parseInt(this.cardElement.style.top);this.cardElement.style.top=Object(r.a)(t.y+e)}if(this.cardElement.style.left){const e=parseInt(this.cardElement.style.left);this.cardElement.style.left=Object(r.a)(t.x+e)}}if(!Object(c.a)("pos_pop")&&e)if(this.positionConfig.arrowToTarget)if("unknown"==v)console.info("arrow unknown position");else{const t=({left:t,right:n,top:r,bottom:i})=>{e.style.left=Object(l.a)(t),e.style.right=Object(l.a)(n),e.style.top=Object(l.a)(r),e.style.bottom=Object(l.a)(i)},n=11,o=11,a=this.cardElement.getBoundingClientRect();if("left"==v){const e=Math.max(o,i.top-a.top)+Math.min(i.height/2,a.height/2-o)-n/2;t({top:Object(r.a)(e),left:Object(r.a)(-n)})}else if("right"==v){const e=Math.max(o,i.top-a.top)+Math.min(i.height/2,a.height/2-o)-n/2;t({top:Object(r.a)(e),right:Object(r.a)(-n)})}else if("top"==v){const e=Math.max(o,i.left-a.left)+Math.min(i.width/2,a.width/2-o)-n/2;t({top:Object(r.a)(-n),left:Object(r.a)(e)})}else if("bottom"==v){const e=Math.max(o,i.left-a.left)+Math.min(i.width/2,a.width/2-o)-n/2;t({bottom:Object(r.a)(-n),left:Object(r.a)(e)})}Object(s.j)(e,Object(s.i)("card-arrow-")),e.classList.add(Object(s.i)("card-arrow-"+v))}else Object(s.j)(e,Object(s.i)("card-arrow-"))}dispose(){this.isDisposed=!0,this.positionTimer&&(window.__pfTimers||(window.__pfTimers=1),window.__pfTimers--,clearInterval(this.positionTimer)),this.motionSenzor.detach()}}},,function(t,e,n){"use strict";class r{constructor(t,e){this.callback=e,this.targetElement=t,this.observer=new ResizeObserver(t=>{for(const e of t)this.callback()}),this.observer.observe(t)}detachAll(){this.observer.disconnect()}}var i=n(95),o=n.n(i),s=n(71);e.a=class{constructor(t,e,n){this.targetElement=t,this.callback=e,window.ResizeObserver?this.resizeSenzor=new r(t,e):this.resizeSenzor=new o.a(t,e),this.scrollSenzor=new s.a(t,e);this.wndResizeCallback=(t=>{e()}).bind(this),window.addEventListener("resize",this.wndResizeCallback),n&&!1!==n.useTimer&&(window.__pfTimers||(window.__pfTimers=0),window.__pfTimers++,this.positionTimer=setInterval(()=>{e&&e()},700))}detach(){this.resizeSenzor.detachAll(),this.scrollSenzor.detach(),window.removeEventListener("resize",this.wndResizeCallback),clearInterval(this.positionTimer)}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(1),i=n(2);function o(t,e,n){Object(r.j)(e,"productfruits--card-pos-"),n||(n={});const o=n.position?n.position:"a";Object(i.a)("crd_rsp_w")?(e.style.width="var(--card-responsive-width)",e.style.maxWidth=n.width||"400px"):e.style.width=n.width;const s=e.getElementsByClassName("productfruits--card-body")[0];s&&(s.style.minHeight=n.minHeight),"a"!=o?(e.classList.add("productfruits--card-pos-"+o),o.startsWith("l")?t.style.justifyContent="flex-start":o.startsWith("r")?t.style.justifyContent="flex-end":t.style.justifyContent=null,o.endsWith("t")?t.style.alignItems="flex-start":o.endsWith("b")?t.style.alignItems="flex-end":t.style.alignItems=null):(t.style.justifyContent=null,t.style.alignItems=null)}},,,,function(t,e,n){"use strict";function r(t,e,n){var r,i;return e||(e=250),function(){var o=n||this,s=+new Date,a=arguments;r&&s<r+e?(clearTimeout(i),i=setTimeout((function(){r=s,t.apply(o,a)}),e)):(r=s,t.apply(o,a))}}n.d(e,"a",(function(){return r}))},,,function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(9),i=n(1),o=n(19);class s{constructor(t,e,n=null,i=10000010){this.backdropConfig=t||{backgroundColor:"#00000066",visible:!0},this.clickHandler=e,this.backdropContainer=r.a.getSubContainer("single-backdrop"+Object(o.a)()),this.backdropContainer.innerHTML="",this.backdropEl=document.createElement("div"),this.backdropEl.style.position="fixed",this.backdropEl.style.top=0,this.backdropEl.style.left=0,this.backdropEl.style.right=0,this.backdropEl.style.bottom=0,this.backdropEl.style.zIndex=i,this.backdropEl.className="productfruits--single-backdrop",this.backdropEl.style.backgroundColor=this.backdropConfig.backgroundColor,this.backdropEl.addEventListener("click",t=>{e&&e(t),t.preventDefault(),t.stopImmediatePropagation()}),n&&this.backdropEl.appendChild(n),this.backdropContainer.appendChild(this.backdropEl),this.setVisibility(this.backdropConfig.visible)}dispose(){this.backdropEl&&(this.backdropEl.remove(),this.backdropEl=null),this.backdropContainer&&(this.backdropContainer.remove(),this.backdropContainer=null)}setVisibility(t){this.backdropEl&&(this.backdropEl.style.display=t?null:"none")}static showAsLoader(t,e){var n=Object(i.h)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}}),r=Object(i.h)("div");if(r.className="productfruits--loader-lg",e){var o=Object(i.h)("h1",{style:{marginBottom:"35px",color:"black"}},e);n.appendChild(o)}return n.appendChild(r),t||(t={visible:!0,backgroundColor:"#00000066"}),new s(t,void 0,n)}}},function(t,e,n){"use strict";function r(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));class r{constructor(t,e){this.keys=t,this.targetElementForPointerEvents=e,this.preventDefault=!1,this.handler=this.blockerHandler.bind(this)}block(){window.addEventListener("keypress",this.handler,!0),window.addEventListener("keydown",this.handler,!0),window.addEventListener("keyup",this.handler,!0),this.targetElementForPointerEvents&&this.keys&&-1!==this.keys.indexOf("_pointer-events")&&(this.oldPointerEvents=window.getComputedStyle(this.targetElementForPointerEvents).pointerEvents,this.targetElementForPointerEvents.style.pointerEvents="none")}unblock(){window.removeEventListener("keypress",this.handler,!0),window.removeEventListener("keydown",this.handler,!0),window.removeEventListener("keyup",this.handler,!0),this.targetElementForPointerEvents&&this.keys&&-1!==this.keys.indexOf("_pointer-events")&&(this.targetElementForPointerEvents.style.pointerEvents=this.oldPointerEvents)}blockerHandler(t){this.keys&&0!=this.keys.length?-1!==this.keys.indexOf(t.key)&&(t.stopImmediatePropagation(),t.stopPropagation(),this.preventDefault&&t.preventDefault()):(t.stopImmediatePropagation(),t.stopPropagation(),this.preventDefault&&t.preventDefault())}}const i=new r;e.b=i},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r={getObject(t){const e=localStorage.getItem("PF_STRG_"+t);return e?JSON.parse(e):null},setObject(t,e){e?localStorage.setItem("PF_STRG_"+t,JSON.stringify(e)):localStorage.removeItem("PF_STRG_"+t)}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));n(16);var r=n(2);function i(t,e,{parent:n,recursive:i,onlyOnce:o=!0,includeDisplay:s=!0}={}){let a=null;var d=new MutationObserver((function(e){e.forEach(e=>{const n=e.removedNodes;n&&n.forEach(e=>{(function t(e,n){if(e===n)return!0;for(let r=0;r<n.childNodes.length;r++){let i=n.childNodes[r];if(i===e)return!0;if(t(e,i))return!0}return!1})(t,e)&&l(t)})})}));if(d.observe(document,{subtree:!i,childList:!0}),s){var c=new MutationObserver(e=>{e.forEach(e=>{"none"!==t.style.display&&"hidden"!==t.style.visibility||l(t)})});c.observe(t,{attributes:!0,attributeFilter:["style"]})}function l(t){e(t),o&&(d&&d.disconnect(),c&&c.disconnect())}return Object(r.a)("iframes")&&t.ownerDocument!=document&&(a=setInterval(()=>{t.isConnected||(clearInterval(a),l(t))},1e3)),()=>{d.disconnect(),c&&c.disconnect(),a&&clearInterval(a)}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));class r{constructor(t,e,{threshold:n}={}){this.targetElement=t,this.observer=new IntersectionObserver(t=>{for(let n of t)e(n.isIntersecting)},{threshold:n}),this.observer.observe(t)}dispose(){this.observer.unobserve(this.targetElement)}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(18),i=n(15),o=n(1),s=n(11),a=n(2),d=n(78);n(27),n(21);class c{constructor(t,e,{markCardAsReadHandler:n,tourId:r,tourName:o,cardId:s,cardName:d,continueHandler:c,skipHandler:b,buttonClickTrackHandler:v,prevStepHandler:w,blockClickBubbling:y}={}){this.cardEl=t,this.contentJson=e,this.markCardAsReadHandler=n,this.continueHandler=c,this.prevStepHandler=w,this.skipHandler=b,this.buttonClickTrackHandler=v,this.tourId=r,this.cardId=s,this.tourName=o,this.cardName=d,this.dataGatherSections=[],Object(i.a)(t,e);var C=t.getElementsByClassName("productfruits--card-body-section-template")[0].content,k=t.getElementsByClassName("productfruits--card-body-youtube-section-template")[0].content,O=window.productFruits.language;if(e&&e.body&&e.body[O]&&e.body[O].length)for(var j of e.body[O]){const t=I(j.row);if(j.youTube){var E=document.importNode(k,!0);Object(i.a)(E.firstElementChild,j),t.appendChild(E)}else j.video?g(t,j):j.button?u(t,j,O,this.markCardAsReadHandler,this.continueHandler,this.skipHandler,this.buttonClickTrackHandler,this.prevStepHandler):j.hero?h(t,j,O):j.mood?this.dataGatherSections.push(p(t,j,O,this.tourId,this.cardId,this.tourName,this.cardName)):j.typeform?f(t,j,O,this.continueHandler):j.html?m(t,j):l(t,j,C)}function I(e){const n=t.getElementsByClassName("productfruits--card-body")[0];if(void 0!==e){const t=n.getElementsByClassName("productfruits--section-row")[e];if(t)return t}const r=document.createElement("div");return r.className="productfruits--section-row",n.appendChild(r),r}y&&(Object(a.a)("lgc_cards_block_click_bubbling")||this.cardEl.addEventListener("click",t=>{t.stopPropagation()}))}getHeader(){return this.cardEl.getElementsByClassName("productfruits--card-header")[0]}getFooter(){return this.cardEl.getElementsByClassName("productfruits--card-footer")[0]}getHeaderTextElement(){return this.cardEl.getElementsByClassName("productfruits--card-header-text")[0]}getFooterNextButton(){return this.cardEl.getElementsByClassName("productfruits--card-footer-next-button")[0]}getFooterBackButton(){return this.cardEl.getElementsByClassName("productfruits--card-footer-back-button")[0]}getFooterSkipButton(){return this.cardEl.getElementsByClassName("productfruits--card-footer-skip-button")[0]}getHeaderSkipButton(){return this.cardEl.getElementsByClassName("productfruits--card-header-skip-button")[0]}getHeaderMinimizeButton(){return this.cardEl.getElementsByClassName("productfruits--card-header-minimize-button")[0]}getStepsCounter(){return this.cardEl.getElementsByClassName("productfruits--card-footer-steps-counter")[0]}getFooterCloseButton(){return this.cardEl.getElementsByClassName("productfruits--card-footer-close-button")[0]}getFooterDismissButton(){return this.cardEl.getElementsByClassName("productfruits--card-footer-dismiss-button")[0]}setNextButtonsState(t){"disabled"==t?this.getFooterNextButton().classList.add(Object(o.i)("btn-disabled")):this.getFooterNextButton().classList.remove(Object(o.i)("btn-disabled"))}getNextButtonsState(t){return this.getFooterNextButton().classList.contains(Object(o.i)("btn-disabled"))?"disabled":"enabled"}}function l(t,e,n){const r=document.importNode(n,!0),o=r.firstElementChild,s=r.firstElementChild.firstElementChild;Object(i.a)(o,e),e.bgColor&&(o.style.background=e.bgColor),s&&e.padding&&(s.style.paddingTop=e.padding.top,s.style.paddingRight=e.padding.right,s.style.paddingBottom=e.padding.bottom,s.style.paddingLeft=e.padding.left),e.sizing&&(o.style.width=e.sizing.width,o.style.flexGrow=e.sizing.width?0:1,o.style.flexBasis=e.sizing.width?"auto":0),e.sizing&&e.sizing.alignment?(o.style.display="flex",o.style.alignItems=e.sizing.alignment,s&&(s.style.flexGrow=1)):(o.style.display=null,o.style.alignItems=null,s&&(s.style.flexGrow=null)),t.appendChild(r)}function u(t,e,n,a,d,c,l,u){const h=Object(o.h)("div",{className:"pf-body-section"}),p=Object(o.h)("div",{className:"productfruits--btn productfruits--btn-card-content"});p.innerHTML=Object(r.a)(e.button.text[n]),"tour"==e.button.action?p.setAttribute("data-pfbind-start-tour",e.button.tourId):"surv"==e.button.action?p.addEventListener("click",()=>{try{const t=e.button.trgtId;window.productFruits?(window.productFruits.surveys.startSurvey(t),a&&a(),window.productFruits.toursFactory.killAllTours(),window.productFruits.contextHelp.closeCurrentCard()):console.log("PF object not attached")}catch(t){console.error(t)}}):"link"==e.button.action&&e.button.opts?p.setAttribute("data-pfbind-link",e.button.opts.url):"link_blank"==e.button.action&&e.button.opts?p.setAttribute("data-pfbind-link-blank",e.button.opts.url):"link_blank_adv"==e.button.action&&e.button.opts?p.setAttribute("data-pfbind-link-blank-adv",e.button.opts.url):"feedback"==e.button.action?p.addEventListener("click",()=>{try{window.productFruits?(window.productFruits.api.feedback.showModal(),a&&a(),window.productFruits.toursFactory.killAllTours(),window.productFruits.contextHelp.closeCurrentCard()):console.log("PF object not attached")}catch(t){console.error(t)}}):"lifering"==e.button.action&&p.addEventListener("click",()=>{try{window.productFruits?(window.productFruits.api.button.showModal(),a&&a(),window.productFruits.toursFactory.killAllTours(),window.productFruits.contextHelp.closeCurrentCard()):console.log("PF object not attached")}catch(t){console.error(t)}}),l&&p.addEventListener("click",()=>{l(p.textContent,{action:e.button.action,tourId:e.button.tourId,url:e.button.opts?e.button.opts.url:null})}),"continue_tour"==e.button.action&&d?p.addEventListener("click",d):"previous_step"==e.button.action&&u?p.addEventListener("click",u):"skip_tour"==e.button.action&&c?p.addEventListener("click",c):"tour"!=e.button.action&&"link"!=e.button.action||!a?"link_blank_adv"==e.button.action?p.addEventListener("click",d):"js"==e.button.action&&p.addEventListener("click",()=>{Object(s.b)("productfruits_card_custom_btn_click",{id:e.button.opts?e.button.opts.ident:""})}):p.addEventListener("click",a),Object(i.a)(p,e.button,n),e.bgColor&&(p.style.background=e.bgColor,p.setAttribute("data-pf-skip-design","")),e.textColor&&(p.style.color=e.textColor,p.setAttribute("data-pf-skip-design",""));const f=Object(o.h)("div",{className:Object(o.i)("card-body-button")});f.appendChild(p),e.padding&&(f.style.paddingTop=e.padding.top,f.style.paddingRight=e.padding.right,f.style.paddingBottom=e.padding.bottom,f.style.paddingLeft=e.padding.left),e.sizing&&(h.style.width=e.sizing.width,h.style.flexGrow=e.sizing.width?0:1,h.style.flexBasis=e.sizing.width?"auto":0),e.sizing&&e.sizing.alignment?(h.style.display="flex",h.style.alignItems=e.sizing.alignment,f.style.flexGrow=1):(h.style.display=null,h.style.alignItems=null,f.style.flexGrow=null),f.style.justifyContent=e.objAlignment,h.appendChild(f),t.appendChild(h)}function h(t,e,n){const r=Object(o.h)("div",{className:"pf-body-section productfruits--card-body-hero-header"}),i=Object(o.h)("div",{className:"productfruits--card-hero-header-text"});i.innerHTML=e.hero.text[n],Object(o.a)(r,{style:{display:"flex",justifyContent:"center"}}),e.bgColor&&(r.style.background=e.bgColor),e.textColor&&(i.style.color=e.textColor),r.appendChild(i),t.appendChild(r)}function p(t,e,n,r,i,s,a){const c=Object(o.h)("div",{className:"pf-body-section productfruits--card-body-mood-meter"}),l=new d.a(e,n,{tourId:r,cardId:i,tourName:s,cardName:a});return c.appendChild(l.getRootElement()),t.appendChild(c),l}function f(t,e,n,r){const i=Object(o.h)("div",{className:"pf-body-section productfruits--card-body-typeform"});i.style.height=e.typeform.height+"px",t.appendChild(i);const s=window.productFruitsUser?encodeURIComponent(window.productFruitsUser.username):"",a=window.productFruitsUser?encodeURIComponent(window.productFruitsUser.email):"";let d="";try{if(window.productFruitsUser&&window.productFruitsUser.props)for(const t in window.productFruitsUser.props)d+="&pf_prop_"+t+"="+window.productFruitsUser.props[t]}catch(t){console.error(t)}!function(t){if(window.typeformEmbed)t();else{var e=document.createElement("script");e.type="text/javascript",e.setAttribute("src","https://embed.typeform.com/embed.js"),e.onload=t;var n=document.getElementsByTagName("head")[0];n.appendChild(e,n)}}(()=>{window.typeformEmbed?typeformEmbed.makeWidget(i,e.typeform.url+"#pf_username="+s+"&pf_email="+a+"&pf_language="+n+d,{onSubmit:t=>{e.typeform.continueOnSubmit&&r()}}):console.log("PF - TypeformSection - typeformEmbed SDK not found.")})}function g(t,e){const n=Object(o.h)("div",{className:"productfruits--section-video-parent-holder"}),r=Object(o.h)("iframe",{src:e.video.url,allowfullscreen:!0,frameborder:"0",allow:"autoplay; fullscreen",className:"pf-designer-video-youtube"});e.video.height?(r.style.height=e.video.height+"px",r.style.minHeight="unset"):(r.style.height=null,r.style.minHeight=null),n.appendChild(r),t.appendChild(n)}function m(t,e){if(!e.html.content)return;const n=Object(o.h)("div",{className:"productfruits--section-html-holder"});if(Object(a.a)("alwscrpt")){const r=document.createRange().createContextualFragment(e.html.content);n.append(r),t.appendChild(n)}else n.innerHTML=Object(r.a)(e.html.content),t.appendChild(n)}},function(t,e,n){"use strict";var r=n(2),i=n(61);const o=new Map;let s=!1;window.addEventListener("scroll",Object(i.a)((t,e,n)=>{!s&&Object(r.a)("glob_scroll")&&(requestAnimationFrame(()=>{for(const r of o.values())r(t,e,n);s=!1}),s=!0)},15),!0);const a={load:[],scroll:[]},d=Object(i.a)((t,e,n)=>{requestAnimationFrame(()=>{for(const r of o.values())r(t,e,n)})},15);function c(){function t(t){try{t.contentWindow.removeEventListener("scroll",d,!0),t.contentWindow.addEventListener("scroll",d,!0)}catch(t){}}document.querySelectorAll("iframe").forEach(e=>{-1===a.load.indexOf(e)&&(e.addEventListener("load",()=>{t(e)}),t(e),a.load.push(e))})}window.__pfTmpBindIframes=c,Object(r.a)("iframes")&&c(),e.a=class{constructor(t,e){this.element=t,this.callback=e,this.parentScrollElement=null,this.attachedListener=this.fireScrollEvent,this.handleScrollEventHandler=this.handleScrollEvent.bind(this),this.init()}init(){if(Object(r.a)("glob_scroll"))o.set(this,this.handleScrollEventHandler),Object(r.a)("iframes")&&c();else{for(var t=this.element;t;){var e=window.getComputedStyle(t);if(this.isScrollElement(e.overflow)||this.isScrollElement(e.overflowX)||this.isScrollElement(e.overflowY)){this.parentScrollElement=t;break}t=t.parentElement}this.parentScrollElement&&this.parentScrollElement.addEventListener("scroll",this.handleScrollEventHandler),window.addEventListener("scroll",this.handleScrollEventHandler)}}detach(){Object(r.a)("glob_scroll")?o.delete(this):(this.parentScrollElement&&this.parentScrollElement.removeEventListener("scroll",this.handleScrollEventHandler),window.removeEventListener("scroll",this.handleScrollEventHandler))}handleScrollEvent(t){this.attachedListener(t)}fireScrollEvent(){this.callback()}isScrollElement(t){return"auto"==t||"scroll"==t}}},,,function(t,e,n){"use strict";function r(t){return"string"==typeof t?null==t?void 0:t.replace(/^\s+|\s+$/g,""):t}n.d(e,"a",(function(){return r}))},,,function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r="pf_notif_consumed"},function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var r=n(1);const i={0:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><circle cx="12" cy="12" fill="#ffd54f" r="12"/><g fill="#6d4c41"><circle cx="7" cy="10" r="2"/><circle cx="17" cy="10" r="2"/><path d="m17.25 19.675c-.192 0-.384-.073-.53-.22-1.261-1.261-2.937-1.955-4.72-1.955s-3.459.694-4.72 1.955c-.293.293-.768.293-1.061 0s-.293-.768 0-1.061c1.545-1.544 3.597-2.394 5.781-2.394s4.236.85 5.78 2.395c.293.293.293.768 0 1.061-.146.146-.338.219-.53.219z"/><path d="m9.25 7.333c-.143 0-.288-.041-.416-.126l-2.5-1.667c-.345-.229-.438-.695-.208-1.04.229-.345.695-.438 1.04-.208l2.5 1.667c.345.23.438.695.208 1.04-.145.217-.382.334-.624.334z"/><path d="m14.75 7.333c-.242 0-.48-.117-.625-.334-.23-.345-.137-.81.208-1.04l2.5-1.667c.343-.23.81-.138 1.04.208.23.345.137.81-.208 1.04l-2.5 1.667c-.127.086-.271.126-.415.126z"/></g></svg>',3:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><circle cx="12" cy="12" fill="#ffd54f" r="12"/><g fill="#6d4c41"><circle cx="7" cy="9" r="2"/><circle cx="17" cy="9" r="2"/><path d="m17 19.536c-.192 0-.384-.073-.53-.22-1.194-1.194-2.781-1.852-4.47-1.852s-3.276.658-4.47 1.852c-.293.293-.768.293-1.061 0s-.293-.768 0-1.061c1.477-1.478 3.441-2.291 5.53-2.291s4.053.813 5.53 2.291c.293.293.293.768 0 1.061-.145.146-.337.22-.529.22z"/></g></svg>',5:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><circle cx="12" cy="12" fill="#ffd54f" r="12"/><g fill="#6d4c41"><circle cx="7" cy="9" r="2"/><circle cx="17" cy="9" r="2"/><path d="m15.25 18h-6.5c-.414 0-.75-.336-.75-.75s.336-.75.75-.75h6.5c.414 0 .75.336.75.75s-.336.75-.75.75z"/></g></svg>',7:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><circle cx="12" cy="12" fill="#ffd54f" r="12"/><g fill="#6d4c41"><circle cx="7" cy="9" r="2"/><circle cx="17" cy="9" r="2"/><path d="m12 20.036c-2.089 0-4.053-.813-5.53-2.291-.293-.293-.293-.768 0-1.061s.768-.293 1.061 0c1.194 1.194 2.781 1.852 4.47 1.852s3.276-.658 4.47-1.852c.293-.293.768-.293 1.061 0s.293.768 0 1.061c-1.479 1.477-3.443 2.291-5.532 2.291z"/></g></svg>',10:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><circle cx="12" cy="12" fill="#ffd54f" r="12"/><circle cx="7" cy="9" fill="#6d4c41" r="2"/><circle cx="17" cy="9" fill="#6d4c41" r="2"/><path d="m20.354 14.305c-.142-.192-.366-.305-.604-.305h-15.5c-.238 0-.462.113-.604.305-.141.192-.183.439-.112.667 1.159 3.737 4.562 6.248 8.466 6.248s7.307-2.511 8.466-6.248c.071-.227.029-.475-.112-.667z" fill="#e53935"/></svg>'};var o=n(3),s=n(19),a=n(27);class d{constructor(t,e,n){this.rootElement=Object(r.h)("div",{className:Object(r.i)("mood-meter-root"),style:c()}),this.contentJson=t,this.moodContent=this.contentJson.mood||{},this.language=e,this.opts=n||{},this.dataId=this.contentJson.dataId||Object(s.a)(),this.rootElement.dataset.dataid=this.dataId,this.tag=this.moodContent.tag,this.hasDedicatedSendButton=this.moodContent.dedicatedSend,this.questionHolderEl=Object(r.h)("div",{style:u()}),this.questionEl=Object(r.h)("div",{className:Object(r.i)("mood-meter-question"),contenteditable:this.opts.editable?this.opts.editable:"false"}),this.followUpHolder=Object(r.h)("div",{style:h()}),this.followUpQuestionEl=Object(r.h)("div",{className:Object(r.i)("mood-meter-followup"),contenteditable:this.opts.editable?this.opts.editable:"false"}),this.followUpAnswerEl=Object(r.h)("textarea",{rows:3,style:{resize:"none",border:"1px solid #00000066",borderRadius:"5px"}}),this.followUpHolder.appendChild(this.followUpQuestionEl),this.followUpHolder.appendChild(this.followUpAnswerEl),this.hasDedicatedSendButton&&this.appendSendButton(),this.initQuestions(),this.moodsHolderEl=Object(r.h)("div",{style:l()}),this.moodsHolderEl.appendChild(this.createMoodIcon(0)),this.moodsHolderEl.appendChild(this.createMoodIcon(3)),this.moodsHolderEl.appendChild(this.createMoodIcon(5)),this.moodsHolderEl.appendChild(this.createMoodIcon(7)),this.moodsHolderEl.appendChild(this.createMoodIcon(10)),this.questionHolderEl.appendChild(this.questionEl),this.questionHolderEl.appendChild(this.moodsHolderEl),this.rootElement.appendChild(this.questionHolderEl),this.selectedRating=null}appendSendButton(){this.sendNotif=Object(r.h)("div",{className:Object(r.i)("mood-meter-sent"),style:{display:"none"}}),this.sendButton=Object(r.h)("button",{className:Object(r.i)("mood-meter-send-button"),onclick:()=>{!this.opts.editable&&this.sendToServer()}},""),this.followUpHolder.appendChild(this.sendNotif),this.followUpHolder.appendChild(this.sendButton)}destroySendButton(){this.sendNotif&&this.sendNotif.remove(),this.sendButton&&this.sendButton.remove()}initQuestions(){this.questionEl.textContent=(this.moodContent.question?this.moodContent.question[this.language]:null)||"How easy was this flow?",this.followUpQuestionEl.textContent=(this.moodContent.followUp?this.moodContent.followUp[this.language]:null)||"Do you want to add something?"}sendToServer(){this.sendNotif&&(this.sendNotif.style.display=null,this.sendButton.style.display="none",this.followUpAnswerEl.style.visibility="hidden");const t=this.gatherData();Object(a.b)(t.mood.tag,t.dataId,this.opts.tourId,this.opts.tourName,this.opts.cardId,this.opts.cardName,this.opts.contextHelpId,t.mood.rating,t.mood.followUp,t.mood.question,t.mood.followUpQuestion)}createMoodIcon(t){const e=Object(r.h)("div",{className:Object(r.i)("mood-meter-icon")});return e.innerHTML=i[t],e.style.width=Object(o.a)(35),e.style.height=Object(o.a)(35),e.style.cursor="pointer",this.opts.editable||e.addEventListener("click",()=>{this.selectedRating=t,this.showFollowUp()}),e}showFollowUp(){this.questionHolderEl.remove(),this.rootElement.appendChild(this.followUpHolder),this.followUpAnswerEl.focus()}getRootElement(){return this.rootElement}gatherData(){return null==this.selectedRating?null:{mood:{dataId:this.dataId,tag:this.tag,rating:this.selectedRating,followUp:this.followUpAnswerEl.value,question:this.questionEl.textContent,followUpQuestion:this.followUpQuestionEl.textContent}}}}const c=()=>({display:"flex",flexDirection:"column",width:"100%"}),l=()=>({display:"flex",justifyContent:"space-evenly",width:"100%",paddingTop:Object(o.a)(10),paddingBottom:Object(o.a)(10)}),u=()=>({display:"flex",flexDirection:"column"}),h=()=>({display:"flex",flexDirection:"column",paddingLeft:Object(o.a)(10),paddingRight:Object(o.a)(10),position:"relative"})},,,,,,,function(t,e,n){"use strict";async function r(t,e){const n=await function(t,e){return Promise.all(t.map(e))}(t,e);return t.filter((t,e)=>n[e])}function i(t,e){return Array.isArray(t)||(t=[]),t.includes(e)?t.filter(t=>t!==e):[...t,e]}n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return i}))},function(t,e,n){"use strict";var r=n(2),i=n(16);e.a=class{constructor(t,e){this.originalJson=t,this.order=e}getId(){return this.originalJson.id}getName(){return this.originalJson.name}hasKeyBlocking(){return null!=this.originalJson.blockedKeys&&this.originalJson.blockedKeys.length>0}getSingleTargetElementSelector(){const t=this.originalJson.elements[0];return t?t.query:null}getTargetElements(){return this.originalJson.elements.map((function(t){return Object(r.a)("iframes")?Object(i.b)(t):Object(i.a)(t)}))}getSingleTargetElement(){if(!this.isSingleTarget())throw new Error("Cannot use getSingleTargetElement on multiple targets.");return Object(r.a)("iframes")?Object(i.b)(this.originalJson.elements[0]):Object(i.a)(this.originalJson.elements[0])}hasTargetElements(){return this.originalJson.elements&&this.originalJson.elements.length>0}isSingleTarget(){return this.originalJson.elements&&1===this.originalJson.elements.length}isDialog(){return"dialog"==this.originalJson.displayType}isTitleVisible(){var t=this.originalJson.content;return!!t.title&&!0===t.title.visible}isFooterVisible(){var t=this.originalJson.content;return!!t.footer&&!1!==t.footer.visible}}},,,,function(t,e,n){"use strict";n.d(e,"a",(function(){return H}));var r=n(9),i=n(12),o=n(37),s=(n(3),n(8)),a=n(38),d=n(45),c=n(2),l=n(11),u=n(5),h=n(14);var p=function(t,e){var n=null;let r=null,o=!1;if(this.dispose=()=>{o=!0,r&&r()},"onclick"===t.type)(n=getDocumentElementByDef(t.element))?a(n):waitForAddedNode(t.element,(function(t){a(t[0])}));else if("onload"===t.type||"always"===t.type||"scheduled"===t.type){if("loading"!==document.readyState?(i.a.logImportantMessage("Checking if the tour should run after page immediately loaded.",e.getName()),e.tryRun()):document.addEventListener("DOMContentLoaded",(function(){o||(i.a.logImportantMessage("Checking if the tour should run after page loaded.",e.getName()),e.tryRun())})),window.addEventListener("pfruits_locationchange",n=>{o||(i.a.logImportantMessage(`Location change detected <small>${Object(h.a)()}</small>`,e.getName()),s.a.verbose(`TourId: ${e.getId()} - location changed detected`,Object(h.a)()),Object(c.a)("trflw1")?(e.isRunning()||0==e.userState||!e.isRunning()&&"always"===t.type)&&e.tryRun():(e.isRunning()||0==e.userState)&&e.tryRun())}),Object(l.c)("pf_event_tracked",()=>{o||(i.a.logImportantMessage("Event tracked, trying to launch",e.getName()),s.a.verbose(`TourId: ${e.getId()} - location changed detected (evnt)`,Object(h.a)()),0!=e.isRunning()&&0!=e.userState||e.tryRun())}),Object(c.a)("trs_rltm")&&Object(c.c)()&&Object(d.c)().listenTo("rules-source-data-updated",()=>{o||(0==e.isRunning()&&0==e.userState||!e.isRunning()&&"always"===t.type)&&e.tryRun()}),Object(c.a)("trs_rltm_2")){const t=()=>{o||0==e.isRunning()&&0==e.userState&&e.tryRun()};Object(l.c)("pfTourFinished",t),Object(l.c)("pfTourSkipped",t),Object(l.c)("survey-closed",t)}}else if("manually"===t.type||"onclicked"===t.type){if("loading"!==document.readyState?(i.a.logImportantMessage("Checking if the tour should run after page immediately loaded.",e.getName()),e.isRunning()&&e.tryRun(!0)):document.addEventListener("DOMContentLoaded",(function(){o||(i.a.logImportantMessage("Checking if the tour should run after page loaded.",e.getName()),e.isRunning()&&e.tryRun(!0))})),window.addEventListener("pfruits_locationchange",t=>{o||(s.a.verbose(`TourId: ${e.getId()} - manual trigger - location changed detected`),e.isRunning()&&e.tryRun(!0))}),"onclicked"===t.type){const n=t.options||{};r&&r(),r=Object(l.d)("click",t=>{const r=document.querySelector(n.selector);t.composedPath&&-1!==t.composedPath().indexOf(r)&&u.c.toursFactory.startTour(e.getId(),{forceForUser:!0!==n.oneTime})},!0)}}else if("customjs"===t.type&&Object(c.b)("tourjstrgr")){const n={listenEventForSelector:(t,e,n)=>Object(l.d)(t,t=>{t&&t.target&&t.target.matches&&t.target.matches(e)&&n&&n(t)}),useElement:(t,e,n)=>{const r=document.querySelector(t);r?e&&e(r):n&&n()},tryStartThisTour:(t=!1)=>{productFruits.toursFactory.startTour(e.getId(),{forceForUser:t})},api:window.productFruits?window.productFruits.api:null};"loading"!==document.readyState?new Function(t.code).bind(n)():document.addEventListener("DOMContentLoaded",(function(){o||new Function(t.code).bind(n)()}))}function a(n){var r=n;n.addEventListener("click",(function n(i){e.init(),e.start(),t.preventDefault&&i.preventDefault(),t.stopPropagation&&i.stopPropagation(),t.oneTime&&r.removeEventListener("click",n)}))}},f=n(86),g=n(48),m=n(68);function b(t,e){var n=e.type,r=e.funcChain;function i(){t.classList.remove(this),"webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend".split(" ").forEach(t=>{document.removeEventListener(t,i)})}function o(t,e){setTimeout((function(){e()}),t)}function s(t,e){for(var n=0;n<t;n++)e()}function a(t,e,n){var r=0,i=setInterval(o,t);function o(){n(),++r===e&&clearInterval(i)}o()}this.run=function(){var e=null;function d(){t.classList.add(e),"webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend".split(" ").forEach(t=>{document.addEventListener(t,i.bind(e))})}"shake"===n?e="productfruits--animation-shake":"rubberBand"==n?e="productfruits--animation-rubberband":"flash"==n&&(e="productfruits--animation-flash"),e&&(r?(r.push(["runAnimation",d]),function t(e){for(var n of e){var r=e.slice(1);if("delay"===n[0]){o(n[1],(function(){t(r)}));break}if("repeat"===n[0]){2===n.length?s(n[1],(function(){t(r)})):a(n[2],n[1],(function(){t(r)}));break}if("runAnimation"===n[0]){n[1]();break}}}(r)):d())}}var v=n(54);n(15);var w=n(16),y=n(27),C=n(13),k=n(19),O=n(22),j=n(52),E=(n(64),n(28)),I=n(41),x=n(1),S=n(69),_=n(70);var T=n(44),F=n(57),A=n(43),N=n(60);function B(t,e){navigator.brave||Object(N.b)()||Object(c.a)("nobeacon")?fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).catch(t=>{console.error("Product Fruits statistics endpoint failed",t)}):navigator.sendBeacon(t,JSON.stringify(e))}var P=n(49),L=n(66),R=n(21),z=n(30),D=n(17),M=n(6),U=n(25);class H{constructor(t,e,{skipTriggers:n,onEnd:i,onCardShown:o,onCardRead:s,onNoCardsLeft:a,onCustomButtonClick:d}={skipTriggers:!1}){this.originalConfig=t,this.tourConfig=t,this.cardHtml=e,this.skipTriggers=n,this.onEnd=i,this.onCustomButtonClick=d,this.onCardShown=o,this.onCardRead=s,this.onNoCardsLeft=a,this.triggerInstances=[],this.userShownCards=t.userShownCards||[],this.tourCards=[],this.tourContainer=r.a.getSubContainer("tour"+Object(k.a)()+" productfruits--tour-container"),this.currentCardInfo=new J;try{this.tourCards=[];const e=t.cards||[];let n=0;for(var c of e)this.tourCards.push(new f.a(c,n)),n++}catch(t){console.error(t)}this.userShownCardsLocalBackup=null,this.waitingForNextCard=!1}initialize(){setTimeout(()=>{if(this.tourConfig.triggers)for(var t of this.tourConfig.triggers){const e=new p(t,this);this.triggerInstances.push(e)}},1)}dispose(t=!1){var e,n;(this.isDisposed=!0,t)&&(null===(e=this.currentCardInfo)||void 0===e||e.clearWaiters(),null===(n=this.currentCardInfo)||void 0===n||n.disposeAll());t&&this.triggerInstances.forEach(t=>t.dispose&&t.dispose())}get triggerType(){return this.tourConfig.triggers[0]?this.tourConfig.triggers[0].type:""}get userState(){return this.tourConfig.userState}set userState(t){this.tourConfig.userState=t}allRulesValid(){if(this.launchRulesIgnored())return!0;const t=new E.a(this.tourConfig.rules);if(t.shouldEvaluate())return t.passes();if(this.tourConfig.segment){return new I.a(this.tourConfig.segment).passes()}return!0}async allRulesValidAsync(){if(this.launchRulesIgnored())return!0;const t=new E.a(this.tourConfig.rules,this.tourConfig.segment,this.tourConfig.rulesId,this.tourConfig.hasRules,"be");return await t.passesAsync()}getCards(){return this.tourCards}getId(){return this.tourConfig.id}getName(){return this.tourConfig.name}isRunning(){return this.tourConfig.userIsRunning}setIsRunning(t=!0){this.tourConfig.userIsRunning=t}tryRun(t,e){if(!this.isDisposed){s.a.verbose(`TourId: ${this.getId()} - tryRun START, forced: `,!0===t),O.a.dispatchTourAttemptingStart(this);try{window.localStorage.getItem("pfdbgflg_trace")&&console.trace()}catch(t){}this.forceForUser=t,t&&i.a.logInfoMessage("Forcing launch.",this.getName()),Object(U.c)(["changelog"]).then(()=>{(e||this.originalConfig.sesNoRules)&&(D.a.logState("tour",this.getId(),"segment_ignored"),this.turnOnIgnoreLaunchRules()),Object(c.c)()?this.showNextCard():this.allRulesValid()?(this.showNextCard(),D.a.logState("tour",this.getId(),"segment_match")):D.a.logState("tour",this.getId(),"segment_not_match")},()=>{})}}turnOnIgnoreLaunchRules(){this.ignoreRules=!0}turnOffIgnoreLaunchRules(){this.originalConfig.sesNoRules=!1,this.ignoreRules=!1}launchRulesIgnored(){return!0===this.ignoreRules}prepareForForceRunning(){window.productFruits&&window.productFruits.toursFactory&&window.productFruits.toursFactory.stopAllTours(),this.tourConfig.userIsRunning=!0}resetShownCardsLocally(t){i.a.logInfoMessage("Reseting the tour stats for user (locally).",this.getName()),t&&t.length||(t=[]),this.userShownCardsLocalBackup=this.userShownCards.slice(),this.userShownCards=t,this.tourConfig.userState=0,this.waitingForNextCard=!1}takeResetBack(){this.userShownCardsLocalBackup&&(this.userShownCards=this.userShownCardsLocalBackup.slice(),this.userShownCardsLocalBackup=null)}getPrevCard(){if(this.currentCardInfo&&this.currentCardInfo.currentCard){const t=this.currentCardInfo.currentCard.getId();let e=null;for(const n of this.tourCards){if(t==n.getId())break;e=n}return e}}getNextCard(){if(0!=this.tourConfig.userState)return i.a.logInfoMessage("The tour is not in the unread state, the tour won't show for this user.",this.getName()),s.a.verbose(`TourId: ${this.getId()} - Tour is not in the notfinished state, skipping`),null;if(Object(c.a)("nxtcrd")){let e=null;for(var t of this.tourCards.slice().reverse()){const n=-1===this.userShownCards.indexOf(t.getId());if(!n)break;n&&(e=t)}return e&&i.a.logInfoMessage(`Unread card '${e.originalJson.name}' found NXT flag.`,this.getName()),e}for(var t of this.tourCards)if(-1===this.userShownCards.indexOf(t.getId()))return i.a.logInfoMessage(`Unread card '${t.originalJson.name}' found.`,this.getName()),t;return i.a.logInfoMessage("There are no unread cards left, stopping this tour.",this.getName()),s.a.verbose(`TourId: ${this.getId()} - No cards left for the tour.`),this.onNoCardsLeft&&this.onNoCardsLeft(),null}showNextCard({logSource:t,showPrevious:e}={}){if(s.a.verbose(`TourId: ${this.getId()} - showNextCard START (${t})`),this.tourContainer.innerHTML="",this.currentCardInfo&&this.currentCardInfo.disposeAll(),this.isDisposed)return void s.a.verbose(`TourId: ${this.getId()} - Already disposed, won't continue.`);var n=e?this.getPrevCard():this.getNextCard();if(this.currentCardAdept=n,n&&0==n.order&&(Object(c.a)("trflw1")&&(this.waitingForNextCard=!1),this.currentCardInfo.clearWaiters()),e&&n&&(this.userShownCards=this.userShownCards.filter(t=>t!=n.getId())),this.waitingForNextCard)return void s.a.verbose(`TourId: ${this.getId()} - Wont run, waiting for the next card.`);if(!n||!Object(C.b)(n.originalJson.url)){if(n){s.a.verbose(`TourId: ${this.getId()} - A card found, but URL does not match, will wait a moment for URL change.`,n,Object(h.a)());const[t,r]=function(t,e,n){let r=null;return[new Promise((i,o)=>{const a=()=>{Object(C.b)(t)&&(window.removeEventListener("pfruits_locationchange",a),n&&n(),i())};window.addEventListener("pfruits_locationchange",a),e&&(r=setTimeout(()=>{s.a.verbose("URL change detection timeouted."),window.removeEventListener("pfruits_locationchange",a),o()},e))}),()=>{}]}(n.originalJson.url,1500,()=>{s.a.verbose(`TourId: ${this.getId()} - URL change detected, continue!`),this.showNextCard({logSource:"URL change detected",showPrevious:e})});this.currentCardInfo.waitForUrlChange=r,t.catch(()=>{s.a.verbose(`TourId: ${this.getId()} - URL change not detected, stopping!`),i.a.logInfoMessage(n.originalJson.name+" - URL doesn't match - stopping.",this.getName()),r.rejected=!0})}return void this.clear()}a.a.dequeue("startTour");const r=this.launchRulesIgnored();if(Object(c.a)("trs_flw3")||window.productFruits&&window.productFruits.toursFactory&&window.productFruits.toursFactory.killAllTours(),r&&this.turnOnIgnoreLaunchRules(),this.waitingForNextCard=!0,this.currentCardAdept=n,n.hasTargetElements()){i.a.logImportantMessage(n.originalJson.name+" - Waiting for the target element to be on the page.",this.getName()),s.a.verbose(`TourId: ${this.getId()} - Get or wait for the next element. Card ID: ${n.getId()}, delay: ${n.originalJson.showDelayMs}`);const t=setTimeout(()=>{var t,e,r,i,o,s;n.originalJson.advanceIfElMissing||(t="missing_element",e=this.getId(),r=n.getId(),i=n.getName(),o=n.originalJson.url.parametrized,s=n.getSingleTargetElementSelector(),window.productFruitsUser&&!window.ProductFruitsDesigner&&Object(c.a)("diag")&&B(Object(u.d)()+"/api/v1/experience-diagnostic/"+window.productFruits.code+"/missing-candidate",{username:window.productFruitsUser.username,containerType:1,containerId:e,stepId:r,stepName:i,selector:s,urlTemplate:o,url:Object(h.a)(),reason:t}))},4e3);this.currentCardInfo.waitForAddedNode=Object(g.a)(n.originalJson.elements[0],e=>{Object(c.a)("iframes")?Object(w.b)(n.originalJson.elements[0]):Object(w.a)(n.originalJson.elements[0]);i.a.logInfoMessage(n.originalJson.name+" - Target element found, proceeding to rendering.",this.getName()),clearTimeout(t),new Promise((t,e)=>{t()}).then(()=>{Object(c.c)()?this.renderNextCard(n,e):this.handleCurrentCard(n,e)})},{showDelayMs:n.originalJson.showDelayMs}),n.originalJson.advanceIfElMissing&&setTimeout(()=>{(Object(c.a)("iframes")?Object(w.b)(n.originalJson.elements[0]):Object(w.a)(n.originalJson.elements[0]))||(this.currentCardInfo.clearWaiters(),this.waitingForNextCard=!1,this.currentCardInfo.currentCard=n,this.sendStatAndShowNextCard({noEvent:!0}))},n.originalJson.advanceIfElMissingDelay||0)}else i.a.logInfoMessage(n.originalJson.name+" - Proceeding to rendering.",this.getName()),s.a.verbose(`TourId: ${this.getId()} - Doesn't have target elements, proceeding. Card ID: ${n.getId()}`),setTimeout(()=>{Object(c.c)()?this.renderNextCard(n,null):this.handleCurrentCard(n)},n.originalJson.showDelayMs||0)}renderNextCard(t,e){const n=()=>{Object(c.a)("vissnzr")&&t.originalJson.elements&&t.originalJson.elements[0]?(this.currentCardInfo.waitForAddedNode&&this.currentCardInfo.waitForAddedNode(),this.currentCardInfo.waitForAddedNode=Object(g.a)(t.originalJson.elements[0],e=>{Object(c.a)("iframes")?Object(w.b)(t.originalJson.elements[0]):Object(w.a)(t.originalJson.elements[0]);i.a.logInfoMessage(t.originalJson.name+" - (double sure) Target element found, proceeding to rendering.",this.getName()),this.handleCurrentCard(t,e)})):this.handleCurrentCard(t,e)};this.rulesCheckedForSession?n():this.allRulesValidAsync().then(t=>{t?(this.rulesCheckedForSession=!0,n(),D.a.logState("tour",this.getId(),"segment_match")):(i.a.logInfoMessage("Launch rules are not met, won't advance.",this.getName()),D.a.logState("tour",this.getId(),"segment_not_match"))})}handleCurrentCard(t,e){if(Object(c.a)("trs_url_chk")&&!Object(C.b)(t.originalJson.url))return s.a.verbose(`TourId: ${this.getId()} - URL is still not qualified`,t.getId()),D.a.logState("tour",this.getId(),"url_not_match"),void this.clear();var n,r;if(Object(c.a)("trs_dbl_chk")&&(null===(n=this.currentCardInfo)||void 0===n||null===(r=n.currentCard)||void 0===r?void 0:r.getId())==(null==t?void 0:t.getId()))return;if(this.isDisposed)return;s.a.verbose(`TourId: ${this.getId()} - Render the tour card.`,t.getId());var a=Object(o.a)(this.cardHtml),d=this.tourCards.length,l=this.tourCards.indexOf(t)+1,h=t.originalJson.cardPosition?t.originalJson.cardPosition.boundingIsTextContent:null,p=new _.a(a,t.originalJson.content,{markCardAsReadHandler:()=>{this.sendStat(t)},continueHandler:()=>{U(),this.sendStatAndShowNextCard()},prevStepHandler:()=>{U(),this.trackBackButtonClick(t,l),this.showNextCard({showPrevious:!0})},skipHandler:()=>{"skip_cncl"!=this.skip()&&U()},buttonClickTrackHandler:(e,n)=>{this.trackCardButtonClick(t,l,e,n),this.onCustomButtonClick&&this.onCustomButtonClick(e,n)},tourId:this.getId(),cardId:t.getId(),tourName:this.getName(),cardName:t.getName(),blockClickBubbling:!0});this.waitingForNextCard=!1,Object(P.a)(a,"data-pf-card-step",l),Object(P.a)(a,"data-pf-card-tour",this.getId());const f=(t={})=>{const e=H();return t.transparentBgColor=e&&e.cardBackdropColor?e.cardBackdropColor:void 0,t.solidBgColor=e&&e.cardBackdropSolidColor?e.cardBackdropSolidColor:void 0,t.highlighterColor=e&&e.cardHighlighterColor?e.cardHighlighterColor:void 0,t.highlighterSpacing=e?e.cardHighlighterSpacing:void 0,t.highlighterThickness=e?e.cardHighlighterThickness:void 0,t};if(this.currentCardInfo.dataGatherSections=p.dataGatherSections||[],this.currentCardInfo.currentCard=t,t.isDialog())this.currentCardInfo.backdrop&&this.currentCardInfo.backdrop.dispose(),this.currentCardInfo.backdrop=new A.a(t.originalJson.backdrop,f({zIndex:t.originalJson.cardPosition?t.originalJson.cardPosition.zIndex:null,cssId:t.getId()})),this.currentCardInfo.cardPositioner&&this.currentCardInfo.cardPositioner.dispose(),this.tourContainer.style.position="fixed",a.classList.add("productfruits--card-dialog-style"),Object(F.a)(this.tourContainer,a,t.originalJson.cardPosition);else if(this.tourContainer.style.position=null,t.isSingleTarget()){this.currentCardInfo.backdrop&&this.currentCardInfo.backdrop.dispose(),this.currentCardInfo.backdrop=new A.a(t.originalJson.backdrop,f({targetElements:t.getTargetElements(),boundingIsTextContent:h,zIndex:t.originalJson.cardPosition?t.originalJson.cardPosition.zIndex:null,cssId:t.getId()}));var g=e&&1===e.length?e[0]:t.getSingleTargetElement();if(this.currentCardInfo.nodeRemWaiterDisposal=Object(m.a)(g,()=>{s.a.verbose(`TourId: ${this.getId()} - Node removed.`),this.clear(),t.originalJson.advanceOnRemove?setTimeout(()=>{U(),this.sendStatAndShowNextCard()},20):setTimeout(()=>{this.showNextCard({logSource:"Node removal"})},20)}),this.currentCardInfo.cardPositioner&&this.currentCardInfo.cardPositioner.dispose(),this.currentCardInfo.cardPositioner=new v.a(g,a,()=>{this.currentCardInfo.backdrop.applyToElement()},null,{autoTopByScroll:!0,boundingIsTextContent:h,positionConfig:t.originalJson.cardPosition,cardHolder:this.tourContainer}),this.currentCardInfo.cardPositioner.applyPosition(),this.currentCardInfo.visibilitySenzor=new S.a(g,e=>{g instanceof SVGElement?s.a.verbose(`TourId: ${this.getId()} - Target is SVG, skipping visibility senzor`,e):(s.a.verbose(`TourId: ${this.getId()} - Target element in the view changed`,e),!t.originalJson.reloadOnHide||e?(a.style.display=e?null:"none",this.currentCardInfo.cardIsVisible=e,this.currentCardInfo.backdrop.setVisibility(e),Object(c.a)("adv_hid")&&t.originalJson.advanceIfElMissing&&(e||(this.currentCardInfo.clearWaiters(),this.waitingForNextCard=!1,this.currentCardInfo.currentCard=t,this.sendStatAndShowNextCard()))):this.showNextCard({logSource:"Node hidden (restart mode on)"}))}),t.originalJson.continueOnElementClick)g.addEventListener("mouseup",N);else if(t.originalJson.advanceAction){const e=t.originalJson.advanceAction;"onclick"==e.type?Object(c.a)("adv_msu_d")?g.addEventListener("mousedown",N,!0):g.addEventListener("mouseup",N):"oninput"==e.type?(e.disableNextTilInput&&p.setNextButtonsState("disabled"),g.addEventListener(e.confirmKey?"keyup":"input",R)):"onhover"==e.type&&g.addEventListener("mouseenter",N,!0)}if(t.originalJson.elementAnimation)new b(g,t.originalJson.elementAnimation).run()}else a.style.left=0,a.style.top=0,s.a.info("PF: multitargets are not supported");p.getFooterNextButton().addEventListener("click",()=>{"disabled"!=p.getNextButtonsState()&&(U(),this.sendStatAndShowNextCard())}),p.getFooterBackButton().addEventListener("click",()=>{U(),this.trackBackButtonClick(t,l),this.showNextCard({showPrevious:!0})}),l!==d||this.currentCardInfo.dataGatherSections.length>0?p.getFooterSkipButton().addEventListener("click",()=>{"skip_cncl"!=this.skip(t.getId())&&U()}):Object(c.a)("skip_on_last")?p.getFooterSkipButton()&&p.getFooterSkipButton().addEventListener("click",()=>{"skip_cncl"!=this.skip(t.getId())&&U()}):(p.getFooterSkipButton().style.display="none",p.getHeaderSkipButton().style.display="none"),p.getHeaderSkipButton()&&p.getHeaderSkipButton().addEventListener("click",()=>{"skip_cncl"!=this.skip(t.getId())&&U()}),this.tourConfig.minimization&&this.tourConfig.minimization.enabled&&p.getHeaderMinimizeButton()&&(p.getHeaderMinimizeButton().style.display="block",p.getHeaderMinimizeButton().addEventListener("click",()=>{this.minimizeTour()})),t.isTitleVisible()||(p.getHeader().classList.add("productfruits-hidden"),Object(P.a)(a,"data-pf-header","hidden")),t.isFooterVisible()||(p.getFooter().classList.add("productfruits-hidden"),Object(P.a)(a,"data-pf-footer","hidden")),p.getStepsCounter().textContent=d>1?l+"/"+d:"";const w=H();var k,E;w&&Object(j.a)(a,w),t.originalJson.cardPosition&&(a.style.zIndex=t.originalJson.cardPosition.zIndex,this.tourContainer.style.zIndex=Object(z.a)(t.originalJson.cardPosition.zIndex)),this.isSomeCardShown=!0,this.setIsRunning(!0),t.hasKeyBlocking()&&(this.currentCardInfo.keyboardBlocker&&this.currentCardInfo.keyboardBlocker.unblock(),this.currentCardInfo.keyboardBlocker=new L.a(t.originalJson.blockedKeys,e?e[0]:null),Object(c.a)("kbrd_blck_def")&&(this.currentCardInfo.keyboardBlocker.preventDefault=!0),this.currentCardInfo.keyboardBlocker.block()),i.a.logSuccessMessage(t.originalJson.name+" - The card is shown.",this.getName(),"Tours",!0),Object(y.f)(this.getId(),this.getName(),t.getId(),t.getName(),l,this.forceForUser),k=this.getId(),E=t.getId(),window.productFruitsUser&&!window.ProductFruitsDesigner&&Object(c.a)("diag")&&B(Object(u.d)()+"/api/v1/experience-diagnostic/"+window.productFruits.code+"/dismiss-candidate",{username:window.productFruitsUser.username,containerType:1,containerId:k,stepId:E}),1==l&&Object(y.l)(this.getId(),this.forceForUser,this.ignoreRules),Object(x.b)(this.tourContainer,a,{}),Object(c.a)("lgc_chk_sp1")||Object(M.b)(()=>{u.c.checklistsFactory.closeAllChecklists()}),O.a.dispatchTourAdvanced(this),Object(T.a)(a,()=>{this.currentCardInfo.cardPositioner&&this.currentCardInfo.cardPositioner.applyPosition(),this.onCardShown&&this.onCardShown(t.getId())});const I=this;function N(){I.sendStatAndShowNextCard(),g.removeEventListener("mouseup",N),g.removeEventListener("mousedown",N,!0),g.removeEventListener("mouseenter",N,!0),s.a.verbose(`TourId: ${I.getId()} - handling advance on click, force:`,I.forceForUser)}function R(e){const n=t.originalJson.advanceAction||{},r=1!=n.caseSensitive;let i=(n.targetValue||"").trim(),o=(e.target.value||"").trim();if(r&&(o=o.toUpperCase(),i=i.toUpperCase()),n.disableNextTilInput){let t=""!=o;n.regex&&(t=new RegExp(n.regex).test(o)),p.setNextButtonsState(t?"enabled":"disabled")}else(!0===n.anyTargetValue||o==i&&(!n.confirmKey||n.confirmKey&&e.key==n.confirmKey))&&(g.removeEventListener("keyup",R),g.removeEventListener("input",R),I.sendStatAndShowNextCard())}function U(){g&&(g.removeEventListener("mouseup",N),g.removeEventListener("mousedown",N,!0),g.removeEventListener("keyup",R),g.removeEventListener("input",R))}function H(){return window.productFruits&&window.productFruits._design?window.productFruits._design.tour:window.productFruits&&window.productFruits.toursFactory&&window.productFruits.toursFactory.toursConfig&&window.productFruits.toursFactory.toursConfig.design?window.productFruits.toursFactory.getToursConfig().design:void 0}this.currentClearAdvanceHandlersFn=U}sendStat(t=null,e){let n=this.tourCards[this.tourCards.length-1],r="";n&&(r=n.originalJson.id),t||(t=this.currentCardInfo.currentCard),this.userShownCards.push(t.getId()),i.a.logInfoMessage(t.originalJson.name+" - Sending step statistics to PF servers.",this.getName());let o=t.getId()===r;if(o&&(this.originalConfig.userState=1,this.originalConfig.userIsRunning=!1,this.rulesCheckedForSession=!1,O.a.dispatchTourFinished(this),i.a.logInfoMessage(t.originalJson.name+" - Tour is finished!",this.getName()),this.takeResetBack(),this.onEnd&&this.onEnd({reason:"done"})),this.onCardRead&&this.onCardRead(t.getId()),Object(y.k)(this.tourConfig.id,this.tourConfig.name,t.getId(),t.getName(),o,null==e?void 0:e.noEvent),Object(c.a)("trflw1")&&o&&"always"==this.triggerType)return this.resetShownCardsLocally(),this.turnOffIgnoreLaunchRules(),{dontDoNextCard:!0}}sendStatAndShowNextCard(t){const e=this.sendStat(null,t);if(this.currentCardInfo&&this.currentCardInfo.dataGatherSections){const t=this.currentCardInfo.dataGatherSections.map(t=>!t.hasDedicatedSendButton&&t.gatherData&&t.gatherData());t[0]&&void 0!==t[0].mood&&Object(y.b)(t[0].mood.tag,t[0].dataId,this.getId(),this.getName(),this.currentCardInfo.currentCard.getId(),this.currentCardInfo.currentCard.getName(),null,t[0].mood.rating,t[0].mood.followUp,t[0].mood.question,t[0].mood.followUpQuestion)}if(this.currentCardInfo&&this.currentCardInfo.currentCard&&this.currentCardInfo.currentCard.originalJson.pauseTillReload)return i.a.logInfoMessage(this.currentCardInfo.currentCard.getName()+" - Paused until reload.",this.getName()),D.a.logState("tour",this.getId(),"paused_reload"),void this.clear();Object(c.a)("trflw1")&&e&&!1!==e.dontDoNextCard?this.clear():(O.a.dispatchTourBeforeAdvanced(this),this.showNextCard())}clear(t=!1){t||s.a.verbose(`TourId: ${this.getId()} - Clearing the tour`),this.isSomeCardShown=!1,this.waitingForNextCard=!1,this.tourContainer.innerHTML="",this.currentCardInfo&&this.currentCardInfo.disposeAll();try{sessionStorage.getItem("productfruits_tour_previewmode")&&this.currentClearAdvanceHandlersFn&&this.currentClearAdvanceHandlersFn()}catch(t){}}skip(t=null){if(this.tourConfig.confirmation&&this.tourConfig.confirmation.enabled){const t=this.tourConfig.confirmation.text&&this.tourConfig.confirmation.text[window.productFruits.language]?this.tourConfig.confirmation.text[window.productFruits.language]:"Are you sure?";if(!confirm(t))return"skip_cncl"}t||(t=this.currentCardInfo.currentCard.getId()),this.userShownCards.push(t),Object(y.j)(this.tourConfig.id,this.tourConfig.name,t,this.currentCardInfo.currentCard.getName()),this.clear(),this.turnOffIgnoreLaunchRules(),i.a.logInfoMessage("User is skipping the tour.",this.getName()),this.tourConfig.userState=2,this.tourConfig.userIsRunning=!1,this.rulesCheckedForSession=!1,this.takeResetBack(),O.a.dispatchTourSkipped(this),this.onEnd&&this.onEnd({reason:"skip"}),Object(c.a)("trflw1")&&"always"==this.triggerType&&this.resetShownCardsLocally(),Object(c.a)("trs_dbl_chk")&&(this.currentCardInfo.currentCard=null)}kill(t=!1){t||s.a.verbose(`TourId: ${this.getId()} - Killing the tour`),this.turnOffIgnoreLaunchRules(),this.clear(t)}serialize(){return{id:this.getId(),currentUserShownCards:this.userShownCards,forceForUser:this.forceForUser}}minimizeTour(){this.setIsRunning(!1),this.minimizationLastKnownUrl=Object(h.a)(),this.tourContainer.style.display="none",this.currentCardInfo.backdrop&&this.currentCardInfo.backdrop.detachFromViewport&&this.currentCardInfo.backdrop.detachFromViewport();const t=r.a.getSubContainer("pf-minimize-btn");Object(x.b)(t,this.createMaximizeButtonElement(),{anim:"bounce-down"})}maximizeTour(){this.setIsRunning(!0),this.minimizationLastKnownUrl&&this.minimizationLastKnownUrl!=Object(h.a)()&&Object(h.b)(this.minimizationLastKnownUrl),this.currentCardInfo.backdrop&&this.currentCardInfo.backdrop.reattachToViewport(),this.tourContainer.style.display=null,r.a.removeSubContainer("pf-minimize-btn")}createMaximizeButtonElement(){const t=(this.tourConfig.minimization.text||{})[window.productFruits.language]||"Resume";return Object(x.h)("div",{className:Object(x.i)("tour-maximize-button"),onClick:t=>{this.maximizeTour()}},t)}trackCardButtonClick(t,e,n,r){if(window.productFruitsUser&&!window.ProductFruitsDesigner){let i={tourId:this.getId(),tourName:this.getName(),cardId:t.getId(),cardName:t.getName(),currentCardOrder:e,cardOrderWithName:e+" - "+t.getName(),buttonTitle:n,buttonAction:r.action};r.tourId&&(i.connectedTourId=r.tourId),r.url&&(i.url=r.url),R.a.getInstance().trackEvent("tour_card_button_click",i)}}trackBackButtonClick(t,e){if(window.productFruitsUser&&!window.ProductFruitsDesigner){let n={tourId:this.getId(),tourName:this.getName(),cardId:t.getId(),cardName:t.getName(),currentCardOrder:e,cardOrderWithName:e+" - "+t.getName()};R.a.getInstance().trackEvent("tour_card_back",n)}}}class J{constructor(){this.backdrop=null,this.cardPositioner=null,this.singleBackdrop=null,this.nodeRemWaiterDisposal=null,this.visibilitySenzor=null,this.currentCard=null,this.dataGatherSections=null,this.keyboardBlocker=null,this.waitForUrlChange=null,this.waitForAddedNode=null,this.cardIsVisible=!0}disposeAll(){this.cardPositioner&&this.cardPositioner.dispose(),this.backdrop&&this.backdrop.removeBackdrop(),this.singleBackdrop&&this.singleBackdrop.dispose(),this.nodeRemWaiterDisposal&&this.nodeRemWaiterDisposal(),this.visibilitySenzor&&this.visibilitySenzor.dispose(),this.keyboardBlocker&&(this.keyboardBlocker.unblock(),this.keyboardBlocker=null),this.cardIsVisible=!0,r.a.removeSubContainer("pf-minimize-btn")}clearWaiters(){this.waitForAddedNode&&(this.waitingForNextCard=!1,this.waitForAddedNode()),this.waitForUrlChange&&this.waitForUrlChange()}}},,,,,function(t,e,n){var r,i;this||window,void 0===(i="function"==typeof(r=function(){var t=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(t){return window.setTimeout(t,20)};function e(t,e){var n=Object.prototype.toString.call(t),r="[object Array]"===n||"[object NodeList]"===n||"[object HTMLCollection]"===n||"undefined"!=typeof jQuery&&t instanceof jQuery||"undefined"!=typeof Elements&&t instanceof Elements,i=0,o=t.length;if(r)for(;i<o;i++)e(t[i]);else e(t)}var n=function(r,i){function o(){var t,e,n=[];this.add=function(t){n.push(t)},this.call=function(){for(t=0,e=n.length;t<e;t++)n[t].call()},this.remove=function(r){var i=[];for(t=0,e=n.length;t<e;t++)n[t]!==r&&i.push(n[t]);n=i},this.length=function(){return n.length},this.clear=function(){n=[]}}function s(e,n){if(e.resizedAttached){if(e.resizedAttached)return void e.resizedAttached.add(n)}else e.resizedAttached=new o,e.resizedAttached.add(n);e.resizeSensor=document.createElement("div"),e.resizeSensor.className="resize-sensor";var r="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;",i="position: absolute; left: 0; top: 0; transition: 0s;";e.resizeSensor.style.cssText=r,e.resizeSensor.innerHTML='<div class="resize-sensor-expand" style="'+r+'"><div style="'+i+'"></div></div><div class="resize-sensor-shrink" style="'+r+'"><div style="'+i+' width: 200%; height: 200%"></div></div>',e.appendChild(e.resizeSensor),"static"==function(t,e){return t.currentStyle?t.currentStyle[e]:window.getComputedStyle?window.getComputedStyle(t,null).getPropertyValue(e):t.style[e]}(e,"position")&&(e.style.position="relative");var s=e.resizeSensor.childNodes[0],a=s.childNodes[0],d=e.resizeSensor.childNodes[1],c=function(){a.style.width="100000px",a.style.height="100000px",s.scrollLeft=1e5,s.scrollTop=1e5,d.scrollLeft=1e5,d.scrollTop=1e5};c();var l,u,h,p,f=!1,g=function(){e.resizedAttached&&(f&&(e.resizedAttached.call(),f=!1),t(g))};t(g);var m=function(){(h=e.offsetWidth)==l&&(p=e.offsetHeight)==u||(f=!0,l=h,u=p),c()},b=function(t,e,n){t.attachEvent?t.attachEvent("on"+e,n):t.addEventListener(e,n)};b(s,"scroll",m),b(d,"scroll",m)}e(r,(function(t){s(t,i)})),this.detach=function(t){n.detach(r,t)},this.detachAll=function(){n.detachAll(r)}};return n.detach=function(t,n){e(t,(function(t){t.resizedAttached&&"function"==typeof n&&(t.resizedAttached.remove(n),t.resizedAttached.length())||t.resizeSensor&&(t.contains(t.resizeSensor)&&t.removeChild(t.resizeSensor),delete t.resizeSensor,delete t.resizedAttached)}))},n.detachAll=function(t){e(t,(function(t){t.resizedAttached&&(t.resizedAttached.clear(),t.resizedAttached.length())||t.resizeSensor&&(t.contains(t.resizeSensor)&&t.removeChild(t.resizeSensor),delete t.resizeSensor,delete t.resizedAttached)}))},n})?r.call(e,n,e,t):r)||(t.exports=i)}]]);